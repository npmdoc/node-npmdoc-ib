<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/pilwon/node-ib"

    >ib (v0.1.22)</a>
</h1>
<h4>Interactive Brokers TWS (or IB Gateway) API client library for Node.js</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib">module ib</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.ib">
            function <span class="apidocSignatureSpan"></span>ib
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller">
            function <span class="apidocSignatureSpan">ib.</span>controller
            <span class="apidocSignatureSpan">(ib, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming">
            function <span class="apidocSignatureSpan">ib.</span>incoming
            <span class="apidocSignatureSpan">(controller)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing">
            function <span class="apidocSignatureSpan">ib.</span>outgoing
            <span class="apidocSignatureSpan">(controller)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.socket">
            function <span class="apidocSignatureSpan">ib.</span>socket
            <span class="apidocSignatureSpan">(controller)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.super_">
            function <span class="apidocSignatureSpan">ib.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ib.</span>contract</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ib.</span>controller.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ib.</span>errors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ib.</span>incoming.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ib.</span>order</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ib.</span>outgoing.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ib.</span>socket.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ib.</span>util</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.contract">module ib.contract</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.contract.cfd">
            function <span class="apidocSignatureSpan">ib.contract.</span>cfd
            <span class="apidocSignatureSpan">(symbol, exchange, currency)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.contract.combo">
            function <span class="apidocSignatureSpan">ib.contract.</span>combo
            <span class="apidocSignatureSpan">(symbol, currency, exchange)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.contract.fop">
            function <span class="apidocSignatureSpan">ib.contract.</span>fop
            <span class="apidocSignatureSpan">(symbol, expiry, strike, right, multiplier, exchange, currency)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.contract.forex">
            function <span class="apidocSignatureSpan">ib.contract.</span>forex
            <span class="apidocSignatureSpan">(symbol, currency)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.contract.future">
            function <span class="apidocSignatureSpan">ib.contract.</span>future
            <span class="apidocSignatureSpan">(symbol, expiry, currency, exchange, multiplier)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.contract.index">
            function <span class="apidocSignatureSpan">ib.contract.</span>index
            <span class="apidocSignatureSpan">(symbol, expiry, currency, exchange)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.contract.option">
            function <span class="apidocSignatureSpan">ib.contract.</span>option
            <span class="apidocSignatureSpan">(symbol, expiry, strike, right, exchange, currency)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.contract.stock">
            function <span class="apidocSignatureSpan">ib.contract.</span>stock
            <span class="apidocSignatureSpan">(symbol, exchange, currency)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.controller">module ib.controller</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.controller">
            function <span class="apidocSignatureSpan">ib.</span>controller
            <span class="apidocSignatureSpan">(ib, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.controller.prototype">module ib.controller.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype._api">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>_api
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype._connect">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>_connect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype._disconnect">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>_disconnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype._send">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>_send
            <span class="apidocSignatureSpan">(data, async)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype._sendAsync">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>_sendAsync
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype.emit">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>emit
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype.emitError">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>emitError
            <span class="apidocSignatureSpan">(errMsg, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype.pause">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype.resume">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype.run">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>run
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.controller.prototype.schedule">
            function <span class="apidocSignatureSpan">ib.controller.prototype.</span>schedule
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.errors">module ib.errors</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.errors.UnderrunError">
            function <span class="apidocSignatureSpan">ib.errors.</span>UnderrunError
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.incoming">module ib.incoming</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.incoming">
            function <span class="apidocSignatureSpan">ib.</span>incoming
            <span class="apidocSignatureSpan">(controller)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.incoming.prototype">module ib.incoming.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._ACCOUNT_SUMMARY">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ACCOUNT_SUMMARY
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._ACCOUNT_SUMMARY_END">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ACCOUNT_SUMMARY_END
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._ACCT_DOWNLOAD_END">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ACCT_DOWNLOAD_END
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._ACCT_UPDATE_TIME">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ACCT_UPDATE_TIME
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._ACCT_VALUE">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ACCT_VALUE
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._BOND_CONTRACT_DATA">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_BOND_CONTRACT_DATA
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._COMMISSION_REPORT">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_COMMISSION_REPORT
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._CONTRACT_DATA">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_CONTRACT_DATA
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._CONTRACT_DATA_END">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_CONTRACT_DATA_END
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._CURRENT_TIME">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_CURRENT_TIME
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._DELTA_NEUTRAL_VALIDATION">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_DELTA_NEUTRAL_VALIDATION
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._ERR_MSG">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ERR_MSG
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._EXECUTION_DATA">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_EXECUTION_DATA
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._EXECUTION_DATA_END">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_EXECUTION_DATA_END
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._FUNDAMENTAL_DATA">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_FUNDAMENTAL_DATA
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._HISTORICAL_DATA">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_HISTORICAL_DATA
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._MANAGED_ACCTS">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_MANAGED_ACCTS
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._MARKET_DATA_TYPE">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_MARKET_DATA_TYPE
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._MARKET_DEPTH">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_MARKET_DEPTH
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._MARKET_DEPTH_L2">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_MARKET_DEPTH_L2
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._NEWS_BULLETINS">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_NEWS_BULLETINS
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._NEXT_VALID_ID">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_NEXT_VALID_ID
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._OPEN_ORDER">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_OPEN_ORDER
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._OPEN_ORDER_END">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_OPEN_ORDER_END
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._ORDER_STATUS">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ORDER_STATUS
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._PORTFOLIO_VALUE">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_PORTFOLIO_VALUE
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._POSITION">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_POSITION
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._POSITION_END">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_POSITION_END
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._REAL_TIME_BARS">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_REAL_TIME_BARS
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._RECEIVE_FA">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_RECEIVE_FA
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._SCANNER_DATA">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_SCANNER_DATA
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._SCANNER_PARAMETERS">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_SCANNER_PARAMETERS
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._TICK_EFP">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_EFP
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._TICK_GENERIC">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_GENERIC
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._TICK_OPTION_COMPUTATION">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_OPTION_COMPUTATION
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._TICK_PRICE">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_PRICE
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._TICK_SIZE">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_SIZE
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._TICK_SNAPSHOT_END">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_SNAPSHOT_END
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._TICK_STRING">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_STRING
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype._emit">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_emit
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype.dequeue">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>dequeue
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype.dequeueBool">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>dequeueBool
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype.dequeueFloat">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>dequeueFloat
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype.dequeueInt">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>dequeueInt
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype.enqueue">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>enqueue
            <span class="apidocSignatureSpan">(tokens)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.incoming.prototype.process">
            function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>process
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.order">module ib.order</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.order.limit">
            function <span class="apidocSignatureSpan">ib.order.</span>limit
            <span class="apidocSignatureSpan">(action, quantity, price, transmitOrder)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.order.market">
            function <span class="apidocSignatureSpan">ib.order.</span>market
            <span class="apidocSignatureSpan">(action, quantity, transmitOrder, goodAfterTime, goodTillDate)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.order.marketClose">
            function <span class="apidocSignatureSpan">ib.order.</span>marketClose
            <span class="apidocSignatureSpan">(action, quantity, transmitOrder)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.order.stop">
            function <span class="apidocSignatureSpan">ib.order.</span>stop
            <span class="apidocSignatureSpan">(action, quantity, price, transmitOrder, parentId, tif)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.order.stopLimit">
            function <span class="apidocSignatureSpan">ib.order.</span>stopLimit
            <span class="apidocSignatureSpan">(action, quantity, limitPrice, stopPrice, transmitOrder, parentId, tif)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.order.trailingStop">
            function <span class="apidocSignatureSpan">ib.order.</span>trailingStop
            <span class="apidocSignatureSpan">(action, quantity, auxPrice, tif, transmitOrder, parentId)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.outgoing">module ib.outgoing</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.outgoing">
            function <span class="apidocSignatureSpan">ib.</span>outgoing
            <span class="apidocSignatureSpan">(controller)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.outgoing.prototype">module ib.outgoing.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype._send">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>_send
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.calculateImpliedVolatility">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>calculateImpliedVolatility
            <span class="apidocSignatureSpan">(reqId, contract, optionPrice, underPrice)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.calculateOptionPrice">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>calculateOptionPrice
            <span class="apidocSignatureSpan">(reqId, contract, volatility, underPrice)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelAccountSummary">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelAccountSummary
            <span class="apidocSignatureSpan">(reqId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelCalculateImpliedVolatility">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelCalculateImpliedVolatility
            <span class="apidocSignatureSpan">(reqId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelCalculateOptionPrice">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelCalculateOptionPrice
            <span class="apidocSignatureSpan">(reqId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelFundamentalData">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelFundamentalData
            <span class="apidocSignatureSpan">(reqId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelHistoricalData">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelHistoricalData
            <span class="apidocSignatureSpan">(tickerId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelMktData">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelMktData
            <span class="apidocSignatureSpan">(tickerId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelMktDepth">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelMktDepth
            <span class="apidocSignatureSpan">(tickerId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelNewsBulletins">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelNewsBulletins
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelOrder">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelOrder
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelPositions">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelPositions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelRealTimeBars">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelRealTimeBars
            <span class="apidocSignatureSpan">(tickerId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.cancelScannerSubscription">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelScannerSubscription
            <span class="apidocSignatureSpan">(tickerId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.exerciseOptions">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>exerciseOptions
            <span class="apidocSignatureSpan">(tickerId, contract, exerciseAction, exerciseQuantity, account, override)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.placeOrder">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>placeOrder
            <span class="apidocSignatureSpan">(id, contract, order)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.replaceFA">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>replaceFA
            <span class="apidocSignatureSpan">(faDataType, xml)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqAccountSummary">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqAccountSummary
            <span class="apidocSignatureSpan">(reqId, group, tags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqAccountUpdates">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqAccountUpdates
            <span class="apidocSignatureSpan">(subscribe, acctCode)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqAllOpenOrders">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqAllOpenOrders
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqAutoOpenOrders">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqAutoOpenOrders
            <span class="apidocSignatureSpan">(bAutoBind)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqContractDetails">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqContractDetails
            <span class="apidocSignatureSpan">(reqId, contract)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqCurrentTime">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqCurrentTime
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqExecutions">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqExecutions
            <span class="apidocSignatureSpan">(reqId, filter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqFundamentalData">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqFundamentalData
            <span class="apidocSignatureSpan">(reqId, contract, reportType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqGlobalCancel">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqGlobalCancel
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqHistoricalData">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqHistoricalData
            <span class="apidocSignatureSpan">(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqIds">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqIds
            <span class="apidocSignatureSpan">(numIds)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqManagedAccts">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqManagedAccts
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqMarketDataType">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqMarketDataType
            <span class="apidocSignatureSpan">(marketDataType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqMktData">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqMktData
            <span class="apidocSignatureSpan">(tickerId, contract, genericTickList, snapshot)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqMktDepth">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqMktDepth
            <span class="apidocSignatureSpan">(tickerId, contract, numRows)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqNewsBulletins">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqNewsBulletins
            <span class="apidocSignatureSpan">(allMsgs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqOpenOrders">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqOpenOrders
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqPositions">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqPositions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqRealTimeBars">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqRealTimeBars
            <span class="apidocSignatureSpan">(tickerId, contract, barSize, whatToShow, useRTH)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqScannerParameters">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqScannerParameters
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.reqScannerSubscription">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqScannerSubscription
            <span class="apidocSignatureSpan">(tickerId, subscription)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.requestFA">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>requestFA
            <span class="apidocSignatureSpan">(faDataType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.outgoing.prototype.setServerLogLevel">
            function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>setServerLogLevel
            <span class="apidocSignatureSpan">(logLevel)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.socket">module ib.socket</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.socket.socket">
            function <span class="apidocSignatureSpan">ib.</span>socket
            <span class="apidocSignatureSpan">(controller)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.socket.prototype">module ib.socket.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.socket.prototype._onConnect">
            function <span class="apidocSignatureSpan">ib.socket.prototype.</span>_onConnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.socket.prototype._onData">
            function <span class="apidocSignatureSpan">ib.socket.prototype.</span>_onData
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.socket.prototype._onEnd">
            function <span class="apidocSignatureSpan">ib.socket.prototype.</span>_onEnd
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.socket.prototype._onError">
            function <span class="apidocSignatureSpan">ib.socket.prototype.</span>_onError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.socket.prototype.connect">
            function <span class="apidocSignatureSpan">ib.socket.prototype.</span>connect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.socket.prototype.disconnect">
            function <span class="apidocSignatureSpan">ib.socket.prototype.</span>disconnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.socket.prototype.send">
            function <span class="apidocSignatureSpan">ib.socket.prototype.</span>send
            <span class="apidocSignatureSpan">(tokens, async)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ib.util">module ib.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.util.incomingToString">
            function <span class="apidocSignatureSpan">ib.util.</span>incomingToString
            <span class="apidocSignatureSpan">(incoming)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.util.numberToString">
            function <span class="apidocSignatureSpan">ib.util.</span>numberToString
            <span class="apidocSignatureSpan">(number)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.util.outgoingToString">
            function <span class="apidocSignatureSpan">ib.util.</span>outgoingToString
            <span class="apidocSignatureSpan">(outgoing)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ib.util.tickTypeToString">
            function <span class="apidocSignatureSpan">ib.util.</span>tickTypeToString
            <span class="apidocSignatureSpan">(tickType)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib" id="apidoc.module.ib">module ib</a></h1>


    <h2>
        <a href="#apidoc.element.ib.ib" id="apidoc.element.ib.ib">
        function <span class="apidocSignatureSpan"></span>ib
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IB(options) {
  this._controller = new Controller(this, options);

  this.on(&#x27;error&#x27;, function () {});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller" id="apidoc.element.ib.controller">
        function <span class="apidocSignatureSpan">ib.</span>controller
        <span class="apidocSignatureSpan">(ib, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Controller(ib, options) {
  if (!_.isPlainObject(options)) { options = {}; }

  _.defaults(options, {
    host: C.DEFAULT_HOST,
    port: C.DEFAULT_PORT,
    clientId: C.DEFAULT_CLIENT_ID,
  });

  Object.defineProperty(this, &#x27;options&#x27;, {
    get: function () {
      return options;
    }
  });

  this._ib = ib;
  this._serverVersion = null;
  this._serverConnectionTime = null;

  this._socket = new Socket(this);
  this._incoming = new Incoming(this);
  this._outgoing = new Outgoing(this);

  this._commands = new CommandBuffer(function (type, data) {
    var funcName = &#x27;_&#x27; + type;
    if (_.has(this.constructor.prototype, funcName) &#x26;&#x26; _.isFunction(this[funcName])) {
      this[funcName](data);
    } else {
      throw new Error(&#x27;Missing function - &#x27; + funcName);
    }
  }, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming" id="apidoc.element.ib.incoming">
        function <span class="apidocSignatureSpan">ib.</span>incoming
        <span class="apidocSignatureSpan">(controller)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Incoming(controller) {
  this._controller = controller;

  this._dataQueue = [];
  this._emitQueue = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing" id="apidoc.element.ib.outgoing">
        function <span class="apidocSignatureSpan">ib.</span>outgoing
        <span class="apidocSignatureSpan">(controller)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Outgoing(controller) {
  this._controller = controller;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.socket" id="apidoc.element.ib.socket">
        function <span class="apidocSignatureSpan">ib.</span>socket
        <span class="apidocSignatureSpan">(controller)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Socket(controller) {
  this._controller = controller;

  this._client = null;
  this._connected = false;
  this._dataFragment = &#x27;&#x27;;
  this._neverReceived = true;
  this._neverSent = true;
  this._waitingAsync = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.super_" id="apidoc.element.ib.super_">
        function <span class="apidocSignatureSpan">ib.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.contract" id="apidoc.module.ib.contract">module ib.contract</a></h1>


    <h2>
        <a href="#apidoc.element.ib.contract.cfd" id="apidoc.element.ib.contract.cfd">
        function <span class="apidocSignatureSpan">ib.contract.</span>cfd
        <span class="apidocSignatureSpan">(symbol, exchange, currency)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cfd = function (symbol, exchange, currency) {
  assert(_.isString(symbol), &#x27;Symbol must be a string.&#x27;);

  return {
    currency: currency || &#x27;USD&#x27;,
    exchange: exchange || &#x27;SMART&#x27;,
    secType: &#x27;CFD&#x27;,
    symbol: symbol
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.contract.combo" id="apidoc.element.ib.contract.combo">
        function <span class="apidocSignatureSpan">ib.contract.</span>combo
        <span class="apidocSignatureSpan">(symbol, currency, exchange)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">combo = function (symbol, currency, exchange) {
  assert(_.isString(symbol), &#x27;Symbol must be a string.&#x27;);

  return {
    currency: currency || &#x27;USD&#x27;,
    exchange: exchange || &#x27;SMART&#x27;,
    secType: &#x27;BAG&#x27;,
    symbol: symbol
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

* [See Java client code for argument types (Boolean/Number/String)](https://github.com/pilwon/node-ib/blob/master/ref/client/EWrapper
.java)

### Builders

```js
// Contract
.contract.<span class="apidocCodeKeywordSpan">combo</span>(symbol, currency, exchange)
.contract.forex(symbol, currency)
.contract.future(symbol, expiry, currency, exchange)
.contract.option(symbol, expiry, strike, right, exchange, currency)
.contract.stock(symbol, exchange, currency)

// Order
.order.limit(action, quantity, price)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.contract.fop" id="apidoc.element.ib.contract.fop">
        function <span class="apidocSignatureSpan">ib.contract.</span>fop
        <span class="apidocSignatureSpan">(symbol, expiry, strike, right, multiplier, exchange, currency)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fop = function (symbol, expiry, strike, right, multiplier, exchange, currency) {
  assert(_.isString(right), &#x27;Right must be a string.&#x27;);
  assert(_.isString(symbol), &#x27;Symbol must be a string.&#x27;);
  assert(_.isString(expiry), &#x27;Expiry must be a string.&#x27;);
  assert(_.isNumber(strike), &#x27;Strike must be a number.&#x27;);

  return {
    currency: currency || &#x27;USD&#x27;,
    exchange: exchange ||&#x27;GLOBEX&#x27;,
    expiry: expiry,
    multiplier: multiplier || 50,
    right: right,
    secType: &#x27;FOP&#x27;,
    strike: strike,
    symbol: symbol
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.contract.forex" id="apidoc.element.ib.contract.forex">
        function <span class="apidocSignatureSpan">ib.contract.</span>forex
        <span class="apidocSignatureSpan">(symbol, currency)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forex = function (symbol, currency) {
  assert(_.isString(symbol), &#x27;Symbol must be a string.&#x27;);
  if (!_.isString(currency)) { currency = &#x27;USD&#x27;; }

  var temp;

  // Swap between symbol and currency if the ordering is incorrect.
  if (CURRENCIES.indexOf(symbol) &#x3e; CURRENCIES.indexOf(currency)) {
    temp = symbol;
    symbol = currency;
    currency = temp;
  }

  return {
    currency: currency,
    exchange: &#x27;IDEALPRO&#x27;,
    secType: &#x27;CASH&#x27;,
    symbol: symbol
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [See Java client code for argument types (Boolean/Number/String)](https://github.com/pilwon/node-ib/blob/master/ref/client/EWrapper
.java)

### Builders

```js
// Contract
.contract.combo(symbol, currency, exchange)
.contract.<span class="apidocCodeKeywordSpan">forex</span>(symbol, currency)
.contract.future(symbol, expiry, currency, exchange)
.contract.option(symbol, expiry, strike, right, exchange, currency)
.contract.stock(symbol, exchange, currency)

// Order
.order.limit(action, quantity, price)
.order.market(action, quantity)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.contract.future" id="apidoc.element.ib.contract.future">
        function <span class="apidocSignatureSpan">ib.contract.</span>future
        <span class="apidocSignatureSpan">(symbol, expiry, currency, exchange, multiplier)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">future = function (symbol, expiry, currency, exchange, multiplier) {
  assert(_.isString(symbol), &#x27;Symbol must be a string.&#x27;);
  assert(_.isString(expiry), &#x27;Expiry must be a string.&#x27;);

  return {
    secType: &#x27;FUT&#x27;,
    symbol: symbol,
    expiry: expiry,
    currency: currency || &#x27;USD&#x27;,
    exchange: exchange || &#x27;ONE&#x27;,
    multiplier: multiplier
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### Builders

```js
// Contract
.contract.combo(symbol, currency, exchange)
.contract.forex(symbol, currency)
.contract.<span class="apidocCodeKeywordSpan">future</span>(symbol, expiry, currency, exchange)
.contract.option(symbol, expiry, strike, right, exchange, currency)
.contract.stock(symbol, exchange, currency)

// Order
.order.limit(action, quantity, price)
.order.market(action, quantity)
.order.stop(action, quantity, price)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.contract.index" id="apidoc.element.ib.contract.index">
        function <span class="apidocSignatureSpan">ib.contract.</span>index
        <span class="apidocSignatureSpan">(symbol, expiry, currency, exchange)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">index = function (symbol, expiry, currency, exchange) {
  assert(_.isString(symbol), &#x27;Symbol must be a string.&#x27;);
  assert(_.isString(expiry), &#x27;Expiry must be a string.&#x27;);

  return {
    currency: currency || &#x27;USD&#x27;,
    exchange: exchange || &#x27;CBOE&#x27;,
    expiry: expiry,
    secType: &#x27;IND&#x27;,
    symbol: symbol
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.contract.option" id="apidoc.element.ib.contract.option">
        function <span class="apidocSignatureSpan">ib.contract.</span>option
        <span class="apidocSignatureSpan">(symbol, expiry, strike, right, exchange, currency)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">option = function (symbol, expiry, strike, right, exchange, currency) {
  assert(_.isString(right), &#x27;Right must be a string.&#x27;);
  assert(_.isString(symbol), &#x27;Symbol must be a string.&#x27;);
  assert(_.isString(expiry), &#x27;Expiry must be a string.&#x27;);
  assert(_.isNumber(strike), &#x27;Strike must be a number.&#x27;);

  return {
    currency: currency || &#x27;USD&#x27;,
    exchange: exchange ||&#x27;SMART&#x27;,
    expiry: expiry,
    multiplier: 100,
    right: right,
    secType: &#x27;OPT&#x27;,
    strike: strike,
    symbol: symbol
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Builders

```js
// Contract
.contract.combo(symbol, currency, exchange)
.contract.forex(symbol, currency)
.contract.future(symbol, expiry, currency, exchange)
.contract.<span class="apidocCodeKeywordSpan">option</span>(symbol, expiry, strike, right, exchange, currency)
.contract.stock(symbol, exchange, currency)

// Order
.order.limit(action, quantity, price)
.order.market(action, quantity)
.order.stop(action, quantity, price)
.order.stopLimit(action, quantity, limitPrice, stopPrice)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.contract.stock" id="apidoc.element.ib.contract.stock">
        function <span class="apidocSignatureSpan">ib.contract.</span>stock
        <span class="apidocSignatureSpan">(symbol, exchange, currency)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stock = function (symbol, exchange, currency) {
  assert(_.isString(symbol), &#x27;Symbol must be a string.&#x27;);

  return {
    currency: currency || &#x27;USD&#x27;,
    exchange: exchange || &#x27;SMART&#x27;,
    secType: &#x27;STK&#x27;,
    symbol: symbol
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).on(&#x27;error&#x27;, function (err) {
  console.error(&#x27;error --- %s&#x27;, err.message);
}).on(&#x27;result&#x27;, function (event, args) {
  console.log(&#x27;%s --- %s&#x27;, event, JSON.stringify(args));
}).once(&#x27;nextValidId&#x27;, function (orderId) {
  ib.placeOrder(
    orderId,
    ib.contract.<span class="apidocCodeKeywordSpan">stock</span>(&#x27;AAPL&#x27;),
    ib.order.limit(&#x27;BUY&#x27;, 1, 0.01)  // safe, unreal value used for demo
  );
  ib.reqOpenOrders();
}).once(&#x27;openOrderEnd&#x27;, function () {
  ib.disconnect();
})
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.controller" id="apidoc.module.ib.controller">module ib.controller</a></h1>


    <h2>
        <a href="#apidoc.element.ib.controller.controller" id="apidoc.element.ib.controller.controller">
        function <span class="apidocSignatureSpan">ib.</span>controller
        <span class="apidocSignatureSpan">(ib, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Controller(ib, options) {
  if (!_.isPlainObject(options)) { options = {}; }

  _.defaults(options, {
    host: C.DEFAULT_HOST,
    port: C.DEFAULT_PORT,
    clientId: C.DEFAULT_CLIENT_ID,
  });

  Object.defineProperty(this, &#x27;options&#x27;, {
    get: function () {
      return options;
    }
  });

  this._ib = ib;
  this._serverVersion = null;
  this._serverConnectionTime = null;

  this._socket = new Socket(this);
  this._incoming = new Incoming(this);
  this._outgoing = new Outgoing(this);

  this._commands = new CommandBuffer(function (type, data) {
    var funcName = &#x27;_&#x27; + type;
    if (_.has(this.constructor.prototype, funcName) &#x26;&#x26; _.isFunction(this[funcName])) {
      this[funcName](data);
    } else {
      throw new Error(&#x27;Missing function - &#x27; + funcName);
    }
  }, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.controller.prototype" id="apidoc.module.ib.controller.prototype">module ib.controller.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.ib.controller.prototype._api" id="apidoc.element.ib.controller.prototype._api">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>_api
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_api = function (data) {
  var func;
  if (_.has(this._outgoing.constructor.prototype, data.func)) {
    func = this._outgoing[data.func];
    if (_.isFunction(func)) {
      return func.apply(this._outgoing, data.args);
    }
  }
  throw new Error(&#x27;Unknown outgoing func - &#x27; + data.func);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller.prototype._connect" id="apidoc.element.ib.controller.prototype._connect">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>_connect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_connect = function () {
  if (!this._socket._connected) {
    this._socket.connect();
  } else {
    this.emitError(&#x27;Cannot connect if already connected.&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller.prototype._disconnect" id="apidoc.element.ib.controller.prototype._disconnect">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>_disconnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_disconnect = function () {
  if (this._socket._connected) {
    this._socket.disconnect();
  } else {
    this.emitError(&#x27;Cannot disconnect if already disconnected.&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller.prototype._send" id="apidoc.element.ib.controller.prototype._send">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>_send
        <span class="apidocSignatureSpan">(data, async)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_send = function (data, async) {
  if (this._socket._connected) {
    this._socket.send(data, async);
  } else {
    this.emitError(&#x27;Cannot send data when disconnected.&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this._socket.send(data, async);
} else {
  this.emitError(&#x27;Cannot send data when disconnected.&#x27;);
}
};

Controller.prototype._sendAsync = function (data) {
this.<span class="apidocCodeKeywordSpan">_send</span>(data, true);
};

Controller.prototype.emit = function () {
var args = Array.prototype.slice.call(arguments);

if (args[0] === &#x27;error&#x27; &#x26;&#x26; !!args[1] &#x26;&#x26; args[1].message) {
  args[1] = args[1].message;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller.prototype._sendAsync" id="apidoc.element.ib.controller.prototype._sendAsync">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>_sendAsync
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_sendAsync = function (data) {
  this._send(data, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller.prototype.emit" id="apidoc.element.ib.controller.prototype.emit">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>emit
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emit = function () {
  var args = Array.prototype.slice.call(arguments);

  if (args[0] === &#x27;error&#x27; &#x26;&#x26; !!args[1] &#x26;&#x26; args[1].message) {
    args[1] = args[1].message;
  }

  this._ib.emit.apply(this._ib, arguments);

  var eventOfArgs = args[0];
  var argsOfArgs = args.slice(1);

  if (!_.includes([&#x27;connected&#x27;, &#x27;disconnected&#x27;, &#x27;error&#x27;, &#x27;received&#x27;, &#x27;sent&#x27;, &#x27;server&#x27;], eventOfArgs)) {
    this._ib.emit(&#x27;result&#x27;, eventOfArgs, argsOfArgs);
  }

  this._ib.emit(&#x27;all&#x27;, eventOfArgs, argsOfArgs);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

this._ib.emit.apply(this._ib, arguments);

var eventOfArgs = args[0];
var argsOfArgs = args.slice(1);

if (!_.includes([&#x27;connected&#x27;, &#x27;disconnected&#x27;, &#x27;error&#x27;, &#x27;received&#x27;, &#x27;sent&#x27;, &#x27
;server&#x27;], eventOfArgs)) {
  this._ib.<span class="apidocCodeKeywordSpan">emit</span>(&#x27;result&#x27;, eventOfArgs, argsOfArgs);
}

this._ib.emit(&#x27;all&#x27;, eventOfArgs, argsOfArgs);
};

Controller.prototype.emitError = function (errMsg, data) {
this.emit(&#x27;error&#x27;, new Error(errMsg), data);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller.prototype.emitError" id="apidoc.element.ib.controller.prototype.emitError">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>emitError
        <span class="apidocSignatureSpan">(errMsg, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitError = function (errMsg, data) {
  this.emit(&#x27;error&#x27;, new Error(errMsg), data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
throw new Error(&#x27;Unknown outgoing func - &#x27; + data.func);
};

Controller.prototype._connect = function () {
if (!this._socket._connected) {
  this._socket.connect();
} else {
  this.<span class="apidocCodeKeywordSpan">emitError</span>(&#x27;Cannot connect if already connected.&#x27;);
}
};

Controller.prototype._disconnect = function () {
if (this._socket._connected) {
  this._socket.disconnect();
} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller.prototype.pause" id="apidoc.element.ib.controller.prototype.pause">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
  this._commands.pause.apply(this._commands, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Socket.prototype._onError = function (err) {
this._controller.emit(&#x27;error&#x27;, err);
};

Socket.prototype.connect = function () {
var self = this;

this._controller.<span class="apidocCodeKeywordSpan">pause</span>();

this._neverReceived = true;
this._neverSent = true;

this._client = net.connect({
  host: this._controller.options.host,
  port: this._controller.options.port
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller.prototype.resume" id="apidoc.element.ib.controller.prototype.resume">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
  this._commands.resume.apply(this._commands, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

this._controller._incoming.process();

// Async
if (this._waitingAsync) {
  this._waitingAsync = false;
  this._controller.<span class="apidocCodeKeywordSpan">resume</span>();
}

this._neverReceived = false;
};

Socket.prototype._onEnd = function () {
var wasConnected = this._connected;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller.prototype.run" id="apidoc.element.ib.controller.prototype.run">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>run
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function () {
  this._commands.run.apply(this._commands, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function Outgoing(controller) {
this._controller = controller;
}

Outgoing.prototype._send = rateLimit(C.MAX_REQ_PER_SECOND, 1000, function () {
var args = Array.prototype.slice.call(arguments);
this._controller.<span class="apidocCodeKeywordSpan">run</span>(&#x27;send&#x27;, _.flatten(args));
});

Outgoing.prototype.calculateImpliedVolatility = function (reqId, contract, optionPrice, underPrice) {
if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.REQ_CALC_IMPLIED_VOLAT) {
  return this._controller.emitError(&#x27;It does not support calculate implied volatility requests.&#x27;);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.controller.prototype.schedule" id="apidoc.element.ib.controller.prototype.schedule">
        function <span class="apidocSignatureSpan">ib.controller.prototype.</span>schedule
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">schedule = function () {
  this._commands.schedule.apply(this._commands, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.errors" id="apidoc.module.ib.errors">module ib.errors</a></h1>


    <h2>
        <a href="#apidoc.element.ib.errors.UnderrunError" id="apidoc.element.ib.errors.UnderrunError">
        function <span class="apidocSignatureSpan">ib.errors.</span>UnderrunError
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function UnderrunError(message) {
  this.name = &#x27;UnderrunError&#x27;;
  this.message = message || &#x27;An underrun error has occurred&#x27;;
  this.stack = (new Error()).stack;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Incoming.prototype._emit = function () {
this._emitQueue.push(arguments);
};

Incoming.prototype.dequeue = function () {
if (this._dataQueue.length == 0) {
  throw new errors.<span class="apidocCodeKeywordSpan">UnderrunError</span>();
}
var result = this._dataQueue.shift();
return result;
};

Incoming.prototype.dequeueBool = function () {
return !!parseInt(this.dequeue(), 10);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.incoming" id="apidoc.module.ib.incoming">module ib.incoming</a></h1>


    <h2>
        <a href="#apidoc.element.ib.incoming.incoming" id="apidoc.element.ib.incoming.incoming">
        function <span class="apidocSignatureSpan">ib.</span>incoming
        <span class="apidocSignatureSpan">(controller)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Incoming(controller) {
  this._controller = controller;

  this._dataQueue = [];
  this._emitQueue = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.incoming.prototype" id="apidoc.module.ib.incoming.prototype">module ib.incoming.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._ACCOUNT_SUMMARY" id="apidoc.element.ib.incoming.prototype._ACCOUNT_SUMMARY">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ACCOUNT_SUMMARY
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ACCOUNT_SUMMARY = function () {
  var version = this.dequeueInt();
  var reqId = this.dequeueInt();
  var account = this.dequeue();
  var tag = this.dequeue();
  var value = this.dequeue();
  var currency = this.dequeue();

  this._emit(&#x27;accountSummary&#x27;, reqId, account, tag, value, currency);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._ACCOUNT_SUMMARY_END" id="apidoc.element.ib.incoming.prototype._ACCOUNT_SUMMARY_END">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ACCOUNT_SUMMARY_END
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ACCOUNT_SUMMARY_END = function () {
  var version = this.dequeueInt();
  var reqId = this.dequeueInt();

  this._emit(&#x27;accountSummaryEnd&#x27;, reqId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._ACCT_DOWNLOAD_END" id="apidoc.element.ib.incoming.prototype._ACCT_DOWNLOAD_END">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ACCT_DOWNLOAD_END
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ACCT_DOWNLOAD_END = function () {
  var version = this.dequeueInt();
  var accountName = this.dequeue();

  this._emit(&#x27;accountDownloadEnd&#x27;, accountName);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._ACCT_UPDATE_TIME" id="apidoc.element.ib.incoming.prototype._ACCT_UPDATE_TIME">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ACCT_UPDATE_TIME
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ACCT_UPDATE_TIME = function () {
  var version = this.dequeueInt();
  var timeStamp = this.dequeue();

  this._emit(&#x27;updateAccountTime&#x27;, timeStamp);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._ACCT_VALUE" id="apidoc.element.ib.incoming.prototype._ACCT_VALUE">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ACCT_VALUE
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ACCT_VALUE = function () {
  var version = this.dequeueInt();
  var key = this.dequeue();
  var value  = this.dequeue();
  var currency = this.dequeue();
  var accountName = null;

  if (version &#x3e;= 2) {
    accountName = this.dequeue();
  }

  this._emit(&#x27;updateAccountValue&#x27;, key, value, currency, accountName);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._BOND_CONTRACT_DATA" id="apidoc.element.ib.incoming.prototype._BOND_CONTRACT_DATA">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_BOND_CONTRACT_DATA
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_BOND_CONTRACT_DATA = function () {
  var version = this.dequeueInt();
  var reqId = -1;
  var i;

  if (version &#x3e;= 3) {
    reqId = this.dequeueInt();
  }

  var contract = {
    summary: {}
  };

  contract.summary.symbol = this.dequeue();
  contract.summary.secType = this.dequeue();
  contract.cusip = this.dequeue();
  contract.coupon = this.dequeueFloat();
  contract.maturity = this.dequeue();
  contract.issueDate  = this.dequeue();
  contract.ratings = this.dequeue();
  contract.bondType = this.dequeue();
  contract.couponType = this.dequeue();
  contract.convertible = this.dequeueBool();
  contract.callable = this.dequeueBool();
  contract.putable = this.dequeueBool();
  contract.descAppend = this.dequeue();
  contract.summary.exchange = this.dequeue();
  contract.summary.currency = this.dequeue();
  contract.marketName = this.dequeue();
  contract.summary.tradingClass = this.dequeue();
  contract.summary.conId = this.dequeueInt();
  contract.minTick = this.dequeueFloat();
  contract.orderTypes = this.dequeue();
  contract.validExchanges = this.dequeue();

  if (version &#x3e;= 2) {
    contract.nextOptionDate = this.dequeue();
    contract.nextOptionType = this.dequeue();
    contract.nextOptionPartial = this.dequeueBool();
    contract.notes = this.dequeue();
  }

  if(version &#x3e;= 4) {
    contract.longName = this.dequeue();
  }

  if (version &#x3e;= 6) {
    contract.evRule = this.dequeue();
    contract.evMultiplier = this.dequeueFloat();
  }

  var secIdListCount;
  var tagValue;

  if (version &#x3e;= 5) {
    secIdListCount = this.dequeueInt();

    if (secIdListCount &#x3e; 0) {
      contract.secIdList = [];

      while (secIdListCount--) {
        tagValue = {};
        tagValue.tag = this.dequeue();
        tagValue.value = this.dequeue();
        contract.secIdList.push(tagValue);
      }
    }
  }

  this._emit(&#x27;bondContractDetails&#x27;, reqId, contract);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._COMMISSION_REPORT" id="apidoc.element.ib.incoming.prototype._COMMISSION_REPORT">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_COMMISSION_REPORT
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_COMMISSION_REPORT = function () {
  var version = this.dequeueInt();

  var commissionReport = {};
  commissionReport.execId = this.dequeue();
  commissionReport.commission = this.dequeueFloat();
  commissionReport.currency = this.dequeue();
  commissionReport.realizedPNL = this.dequeueFloat();
  commissionReport.yield = this.dequeueFloat();
  commissionReport.yieldRedemptionDate = this.dequeueInt();

  this._emit(&#x27;commissionReport&#x27;, commissionReport);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._CONTRACT_DATA" id="apidoc.element.ib.incoming.prototype._CONTRACT_DATA">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_CONTRACT_DATA
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_CONTRACT_DATA = function () {
  var version = this.dequeueInt();
  var reqId = -1;

  if (version &#x3e;= 3) {
    reqId = this.dequeueInt();
  }

  var contract = {
    summary: {}
  };

  contract.summary.symbol = this.dequeue();
  contract.summary.secType = this.dequeue();
  contract.summary.expiry = this.dequeue();
  contract.summary.strike = this.dequeueFloat();
  contract.summary.right = this.dequeue();
  contract.summary.exchange = this.dequeue();
  contract.summary.currency = this.dequeue();
  contract.summary.localSymbol = this.dequeue();
  contract.marketName = this.dequeue();
  contract.summary.tradingClass = this.dequeue();
  contract.summary.conId = this.dequeueInt();
  contract.minTick = this.dequeueFloat();
  contract.summary.multiplier = this.dequeue();
  contract.orderTypes = this.dequeue();
  contract.validExchanges = this.dequeue();

  if (version &#x3e;= 2) {
    contract.priceMagnifier = this.dequeueInt();
  }

  if (version &#x3e;= 4) {
    contract.underConId = this.dequeueInt();
  }

  if (version &#x3e;= 5) {
    contract.longName = this.dequeue();
    contract.summary.primaryExch = this.dequeue();
  }

  if (version &#x3e;= 6) {
    contract.contractMonth = this.dequeue();
    contract.industry = this.dequeue();
    contract.category = this.dequeue();
    contract.subcategory = this.dequeue();
    contract.timeZoneId = this.dequeue();
    contract.tradingHours = this.dequeue();
    contract.liquidHours = this.dequeue();
  }

  if (version &#x3e;= 8) {
    contract.evRule = this.dequeue();
    contract.evMultiplier = this.dequeueFloat();
  }

  var secIdListCount;
  var tagValue;
  var i;

  if (version &#x3e;= 7) {
    secIdListCount = this.dequeueInt();
    if (secIdListCount  &#x3e; 0) {
      contract.secIdList = [];
      for (i = 0; i &#x3c; secIdListCount; ++i) {
        tagValue = {};
        tagValue.tag = this.dequeue();
        tagValue.value = this.dequeue();
        contract.secIdList.push(tagValue);
      }
    }
  }

  this._emit(&#x27;contractDetails&#x27;, reqId, contract);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._CONTRACT_DATA_END" id="apidoc.element.ib.incoming.prototype._CONTRACT_DATA_END">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_CONTRACT_DATA_END
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_CONTRACT_DATA_END = function () {
  var version = this.dequeueInt();
  var reqId = this.dequeueInt();

  this._emit(&#x27;contractDetailsEnd&#x27;, reqId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._CURRENT_TIME" id="apidoc.element.ib.incoming.prototype._CURRENT_TIME">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_CURRENT_TIME
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_CURRENT_TIME = function () {
  var version = this.dequeueInt();
  var time = this.dequeueInt();

  this._emit(&#x27;currentTime&#x27;, time);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._DELTA_NEUTRAL_VALIDATION" id="apidoc.element.ib.incoming.prototype._DELTA_NEUTRAL_VALIDATION">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_DELTA_NEUTRAL_VALIDATION
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_DELTA_NEUTRAL_VALIDATION = function () {
  var version = this.dequeueInt();
  var reqId = this.dequeueInt();

  var underComp = {};
  underComp.conId = this.dequeueInt();
  underComp.delta = this.dequeueFloat();
  underComp.price = this.dequeueFloat();

  this._emit(&#x27;deltaNeutralValidation&#x27;, reqId, underComp);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._ERR_MSG" id="apidoc.element.ib.incoming.prototype._ERR_MSG">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ERR_MSG
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ERR_MSG = function () {
  var errorCode;
  var errorMsg;
  var id;
  var version = this.dequeueInt();

  if (version &#x3c; 2) {
    errorMsg = this.dequeue();
    this._controller.emitError(errorMsg);
  } else {
    id = this.dequeueInt();
    errorCode = this.dequeueInt();
    errorMsg = this.dequeue();
    this._controller.emitError(errorMsg, {
      id: id,
      code: errorCode
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._EXECUTION_DATA" id="apidoc.element.ib.incoming.prototype._EXECUTION_DATA">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_EXECUTION_DATA
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_EXECUTION_DATA = function () {
  var version = this.dequeueInt();

  var reqId = -1;

  if (version &#x3e;= 7) {
    reqId = this.dequeueInt();
  }

  var orderId = this.dequeueInt();

  // read contract fields
  var contract = {};

  if (version &#x3e;= 5) {
    contract.conId = this.dequeueInt();
  }

  contract.symbol = this.dequeue();
  contract.secType = this.dequeue();
  contract.expiry = this.dequeue();
  contract.strike = this.dequeueFloat();
  contract.right = this.dequeue();

  if (version &#x3e;= 9) {
    contract.multiplier = this.dequeue();
  }

  contract.exchange = this.dequeue();
  contract.currency = this.dequeue();
  contract.localSymbol = this.dequeue();

  if (version &#x3e;= 10) {
    contract.tradingClass = this.dequeue();
  }

  var exec = {};

  exec.orderId = orderId;
  exec.execId = this.dequeue();
  exec.time = this.dequeue();
  exec.acctNumber = this.dequeue();
  exec.exchange = this.dequeue();
  exec.side = this.dequeue();
  exec.shares = this.dequeue();
  exec.price = this.dequeueFloat();

  if (version &#x3e;= 2) {
    exec.permId = this.dequeueInt();
  }

  if (version &#x3e;= 3) {
    exec.clientId = this.dequeueInt();
  }

  if (version &#x3e;= 4) {
    exec.liquidation = this.dequeueInt();
  }

  if (version &#x3e;= 6) {
    exec.cumQty = this.dequeueInt();
    exec.avgPrice = this.dequeueFloat();
  }

  if (version &#x3e;= 8) {
    exec.orderRef = this.dequeue();
  }

  if (version &#x3e;= 9) {
    exec.evRule = this.dequeue();
    exec.evMultiplier = this.dequeueFloat();
  }

  this._emit(&#x27;execDetails&#x27;, reqId, contract, exec);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._EXECUTION_DATA_END" id="apidoc.element.ib.incoming.prototype._EXECUTION_DATA_END">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_EXECUTION_DATA_END
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_EXECUTION_DATA_END = function () {
  var version = this.dequeueInt();
  var reqId = this.dequeueInt();

  this._emit(&#x27;execDetailsEnd&#x27;, reqId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._FUNDAMENTAL_DATA" id="apidoc.element.ib.incoming.prototype._FUNDAMENTAL_DATA">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_FUNDAMENTAL_DATA
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_FUNDAMENTAL_DATA = function () {
  var version = this.dequeueInt();
  var reqId = this.dequeueInt();
  var data = this.dequeue();

  this._emit(&#x27;fundamentalData&#x27;, reqId, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._HISTORICAL_DATA" id="apidoc.element.ib.incoming.prototype._HISTORICAL_DATA">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_HISTORICAL_DATA
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_HISTORICAL_DATA = function () {
  var version = this.dequeueInt();
  var reqId = this.dequeueInt();
  var completedIndicator = &#x27;finished&#x27;;
  var startDateStr;
  var endDateStr;

  if (version &#x3e;= 2) {
    startDateStr = this.dequeue();
    endDateStr = this.dequeue();
    completedIndicator += &#x27;-&#x27; + startDateStr + &#x27;-&#x27; + endDateStr;
  }

  var itemCount = this.dequeueInt();
  var date;
  var open;
  var high;
  var low;
  var close;
  var volume;
  var WAP;
  var hasGaps;
  var barCount;

  while (itemCount--) {
    date = this.dequeue();
    open = this.dequeueFloat();
    high = this.dequeueFloat();
    low = this.dequeueFloat();
    close = this.dequeueFloat();
    volume = this.dequeueInt();
    WAP = this.dequeueFloat();
    hasGaps = this.dequeueBool();
    barCount = -1;

    if (version &#x3e;= 3) {
      barCount = this.dequeueInt();
    }

    this._emit(&#x27;historicalData&#x27;, reqId, date, open, high, low, close, volume, barCount, WAP, hasGaps);
  }

  // send end of dataset marker
  this._emit(&#x27;historicalData&#x27;, reqId, completedIndicator, -1, -1, -1, -1, -1, -1, -1, false);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._MANAGED_ACCTS" id="apidoc.element.ib.incoming.prototype._MANAGED_ACCTS">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_MANAGED_ACCTS
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_MANAGED_ACCTS = function () {
  var version = this.dequeueInt();
  var accountsList = this.dequeue();

  this._emit(&#x27;managedAccounts&#x27;, accountsList);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._MARKET_DATA_TYPE" id="apidoc.element.ib.incoming.prototype._MARKET_DATA_TYPE">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_MARKET_DATA_TYPE
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_MARKET_DATA_TYPE = function () {
  var version = this.dequeueInt();
  var reqId = this.dequeueInt();
  var marketDataType = this.dequeueInt();

  this._emit(&#x27;marketDataType&#x27;, reqId, marketDataType);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._MARKET_DEPTH" id="apidoc.element.ib.incoming.prototype._MARKET_DEPTH">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_MARKET_DEPTH
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_MARKET_DEPTH = function () {
  var version = this.dequeueInt();
  var id = this.dequeueInt();
  var position = this.dequeueInt();
  var operation = this.dequeueInt();
  var side = this.dequeueInt();
  var price = this.dequeueFloat();
  var size = this.dequeueInt();

  this._emit(&#x27;updateMktDepth&#x27;, id, position, operation, side, price, size);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._MARKET_DEPTH_L2" id="apidoc.element.ib.incoming.prototype._MARKET_DEPTH_L2">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_MARKET_DEPTH_L2
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_MARKET_DEPTH_L2 = function () {
  var version = this.dequeueInt();
  var id = this.dequeueInt();
  var position = this.dequeueInt();
  var marketMaker = this.dequeue();
  var operation = this.dequeueInt();
  var side = this.dequeueInt();
  var price = this.dequeueFloat();
  var size = this.dequeueInt();

  this._emit(&#x27;updateMktDepthL2&#x27;, id, position, marketMaker, operation, side, price, size);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._NEWS_BULLETINS" id="apidoc.element.ib.incoming.prototype._NEWS_BULLETINS">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_NEWS_BULLETINS
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_NEWS_BULLETINS = function () {
  var version = this.dequeueInt();
  var newsMsgId = this.dequeueInt();
  var newsMsgType = this.dequeueInt();
  var newsMessage = this.dequeue();
  var originatingExch = this.dequeue();

  this._emit(&#x27;updateNewsBulletin&#x27;, newsMsgId, newsMsgType, newsMessage, originatingExch);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._NEXT_VALID_ID" id="apidoc.element.ib.incoming.prototype._NEXT_VALID_ID">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_NEXT_VALID_ID
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_NEXT_VALID_ID = function () {
  var version = this.dequeueInt();
  var orderId = this.dequeueInt();

  this._emit(&#x27;nextValidId&#x27;, orderId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._OPEN_ORDER" id="apidoc.element.ib.incoming.prototype._OPEN_ORDER">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_OPEN_ORDER
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_OPEN_ORDER = function () {
  var i;

  // read version
  var version = this.dequeueInt();

  // read order id
  var order = {};
  order.orderId = this.dequeueInt();

  // read contract fields
  var contract = {};

  if (version &#x3e;= 17) {
    contract.conId = this.dequeueInt();
  }

  contract.symbol = this.dequeue();
  contract.secType = this.dequeue();
  contract.expiry = this.dequeue();
  contract.strike = this.dequeueFloat();
  contract.right = this.dequeue();

  if (version &#x3e;= 32) {
    contract.multiplier = this.dequeue();
  }

  contract.exchange = this.dequeue();
  contract.currency = this.dequeue();

  if (version &#x3e;= 2) {
    contract.localSymbol = this.dequeue();
  }

  if (version &#x3e;= 32) {
    contract.tradingClass = this.dequeue();
  }

  // read order fields
  order.action = this.dequeue();
  order.totalQuantity = this.dequeueInt();
  order.orderType = this.dequeue();

  if (version &#x3c; 29) {
    order.lmtPrice = this.dequeueFloat();
  } else {
    order.lmtPrice = this.dequeueFloat() || Number.MAX_VALUE;
  }

  if (version &#x3c; 30) {
    order.auxPrice = this.dequeueFloat();
  } else {
    order.auxPrice = this.dequeueFloat() || Number.MAX_VALUE;
  }

  order.tif = this.dequeue();
  order.ocaGroup = this.dequeue();
  order.account = this.dequeue();
  order.openClose = this.dequeue();
  order.origin = this.dequeueInt();
  order.orderRef = this.dequeue();

  if (version &#x3e;= 3) {
    order.clientId = this.dequeueInt();
  }

  if (version &#x3e;= 4) {
    order.permId = this.dequeueInt();

    if (version &#x3c; 18) {
      // will never happen
      /* order.ignoreRth = */ this.dequeueBool();
    } else {
      order.outsideRth = this.dequeueBool();
    }

    order.hidden = this.dequeueBool();
    order.discretionaryAmt = this.dequeueFloat();
  }

  if (version &#x3e;= 5) {
    order.goodAfterTime = this.dequeue();
  }

  if (version &#x3e;= 6) {
    // skip deprecated sharesAllocation field
    this.dequeue();
  }

  if (version &#x3e;= 7) {
    order.faGroup = this.dequeue();
    order.faMethod = this.dequeue();
    order.faPercentage = this.dequeue();
    order.faProfile = this.dequeue();
  }

  if (version &#x3e;= 8) {
    order.goodTillDate = this.dequeue();
  }

  if (version &#x3e;= 9) {
    order.rule80A = this.dequeue();
    order.percentOffset = this.dequeueFloat() || Number.MAX_VALUE;
    order.settlingFirm = this.dequeue();
    order.shortSaleSlot = this.dequeueInt();
    order.designatedLocation = this.dequeue();

    if (this._controller._serverVersion === 51) {
      this.dequeueInt();  // exemptCode
    } else if (version &#x3e;= 23) {
      order.exemptCode = this.dequeueInt();
    }

    order.auctionStrategy = this.dequeueInt();
    order.startingPrice = this.dequeueFloat() || Number.MAX_VALUE;
    order.stockRefPrice = this.dequeueFloat() || Number.MAX_VALUE;
    order.delta = this.dequeueFloat() || Number.MAX_VALUE;
    order.stockRangeLower = this.dequeueFloat() || Number.MAX_VALUE;
    order.stockRangeUpper = this.dequeueFloat() || Number.MAX_VALUE;
    order.displaySize = this.dequeueInt();

    if (version &#x3c; 18) {
      // will never happen
      /* order.rthOnly = */ this.dequeueBool();
    }

    order.blockOrder = this.dequeueBool();
    order.sweepToFill = this.dequeueBool();
    order.allOrNone = this.dequeueBool();
    order.minQty = this.dequeueInt() || Number.MAX_VALUE;
    order.ocaType = this.dequeueInt();
    order.eTradeOnly = this.dequeueBool();
    order.firmQuoteOnly = this.dequeueBool();
    order.nbboPriceCap = this.dequeueFloat() || Number.MAX_VALUE;
  }

  if (version &#x3e;= 10) {
    order.parentId = this.dequeueInt();
    order.triggerMethod = this.dequeueInt();
  }

  var receivedInt;

  if (version &#x3e;= 11) {
    order.volatility = this.dequeueFloat() || Number.MAX_VALUE;
    order.volatilityType = this.dequeueInt();

    if (version === 11) {
      receivedInt = this.dequeueInt();
      order.deltaNeutralOrderType = (receivedInt === 0 ? &#x27;NONE&#x27; : &#x27;MKT&#x27;);
    } else {  // version 12 and up
      order.deltaNeutralOrderType = this.dequeue();
      order.deltaNeutralAuxPrice = this.dequeueFloat() || Number.MAX_VALUE;

      if (ve ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._OPEN_ORDER_END" id="apidoc.element.ib.incoming.prototype._OPEN_ORDER_END">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_OPEN_ORDER_END
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_OPEN_ORDER_END = function () {
  var version = this.dequeueInt();

  this._emit(&#x27;openOrderEnd&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._ORDER_STATUS" id="apidoc.element.ib.incoming.prototype._ORDER_STATUS">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_ORDER_STATUS
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ORDER_STATUS = function () {
  var version = this.dequeueInt();
  var id = this.dequeueInt();
  var status = this.dequeue();
  var filled = this.dequeueInt();
  var remaining = this.dequeueInt();
  var avgFillPrice = this.dequeueFloat();

  var permId = 0;

  if (version &#x3e;= 2) {
    permId = this.dequeueInt();
  }

  var parentId = 0;

  if (version &#x3e;= 3) {
    parentId = this.dequeueInt();
  }

  var lastFillPrice = 0;

  if (version &#x3e;= 4) {
    lastFillPrice = this.dequeueFloat();
  }

  var clientId = 0;

  if (version &#x3e;= 5) {
    clientId = this.dequeueInt();
  }

  var whyHeld = null;

  if (version &#x3e;= 6) {
    whyHeld = this.dequeue();
  }

  this._emit(&#x27;orderStatus&#x27;, id, status, filled, remaining, avgFillPrice,
                                       permId, parentId, lastFillPrice, clientId, whyHeld);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._PORTFOLIO_VALUE" id="apidoc.element.ib.incoming.prototype._PORTFOLIO_VALUE">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_PORTFOLIO_VALUE
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_PORTFOLIO_VALUE = function () {
  var version = this.dequeueInt();

  var contract = {};

  if (version &#x3e;= 6) {
    contract.conId = this.dequeueInt();
  }

  contract.symbol = this.dequeue();
  contract.secType = this.dequeue();
  contract.expiry = this.dequeue();
  contract.strike = this.dequeueFloat();
  contract.right = this.dequeue();

  if (version &#x3e;= 7) {
    contract.multiplier = this.dequeue();
    contract.primaryExch = this.dequeue();
  }

  contract.currency = this.dequeue();

  if (version &#x3e;= 2) {
    contract.localSymbol = this.dequeue();
  }

  if (version &#x3e;= 8) {
    contract.tradingClass = this.dequeue();
  }

  var position = this.dequeueInt();
  var marketPrice = this.dequeueFloat();
  var marketValue = this.dequeueFloat();
  var averageCost = 0.0;
  var unrealizedPNL = 0.0;
  var realizedPNL = 0.0;

  if (version &#x3e;= 3) {
    averageCost = this.dequeueFloat();
    unrealizedPNL = this.dequeueFloat();
    realizedPNL = this.dequeueFloat();
  }

  var accountName = null;

  if (version &#x3e;= 4) {
    accountName = this.dequeue();
  }

  if (version === 6 &#x26;&#x26; this._controller._serverVersion === 39) {
    contract.primaryExch = this.dequeue();
  }

  this._emit(&#x27;updatePortfolio&#x27;, contract, position, marketPrice, marketValue,
                                           averageCost, unrealizedPNL, realizedPNL, accountName);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._POSITION" id="apidoc.element.ib.incoming.prototype._POSITION">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_POSITION
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_POSITION = function () {
  var version = this.dequeueInt();
  var account = this.dequeue();
  var contract = {};

  contract.conId = this.dequeueInt();
  contract.symbol = this.dequeue();
  contract.secType = this.dequeue();
  contract.expiry = this.dequeue();
  contract.strike = this.dequeueFloat();
  contract.right = this.dequeue();
  contract.multiplier = this.dequeue();
  contract.exchange = this.dequeue();
  contract.currency = this.dequeue();
  contract.localSymbol = this.dequeue();
  if (version &#x3e;= 2) {
    contract.tradingClass = this.dequeue();
  }

  var pos = this.dequeueInt();
  var avgCost = 0;
  if (version &#x3e;= 3) {
    avgCost = this.dequeueFloat();
  }

  this._emit(&#x27;position&#x27;, account, contract, pos, avgCost);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._POSITION_END" id="apidoc.element.ib.incoming.prototype._POSITION_END">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_POSITION_END
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_POSITION_END = function () {
  var version = this.dequeueInt();

  this._emit(&#x27;positionEnd&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._REAL_TIME_BARS" id="apidoc.element.ib.incoming.prototype._REAL_TIME_BARS">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_REAL_TIME_BARS
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_REAL_TIME_BARS = function () {
  var version = this.dequeueInt();
  var reqId = this.dequeueInt();
  var time = this.dequeueInt();
  var open = this.dequeueFloat();
  var high = this.dequeueFloat();
  var low = this.dequeueFloat();
  var close = this.dequeueFloat();
  var volume = this.dequeueInt();
  var wap = this.dequeueFloat();
  var count = this.dequeueInt();

  this._emit(&#x27;realtimeBar&#x27;, reqId, time, open, high, low, close, volume, wap, count);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._RECEIVE_FA" id="apidoc.element.ib.incoming.prototype._RECEIVE_FA">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_RECEIVE_FA
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_RECEIVE_FA = function () {
  var version = this.dequeueInt();
  var faDataType = this.dequeueInt();
  var xml = this.dequeue();

  this._emit(&#x27;receiveFA&#x27;, faDataType, xml);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._SCANNER_DATA" id="apidoc.element.ib.incoming.prototype._SCANNER_DATA">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_SCANNER_DATA
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_SCANNER_DATA = function () {
  var version = this.dequeueInt();
  var tickerId = this.dequeueInt();
  var numberOfElements = this.dequeueInt();

  var rank;

  while (numberOfElements--) {
    var contract = {
      summary: {}
    };
    rank = this.dequeueInt();
    if (version &#x3e;= 3) {
      contract.summary.conId = this.dequeueInt();
    }

    contract.summary.symbol = this.dequeue();
    contract.summary.secType = this.dequeue();
    contract.summary.expiry = this.dequeue();
    contract.summary.strike = this.dequeueFloat();
    contract.summary.right = this.dequeue();
    contract.summary.exchange = this.dequeue();
    contract.summary.currency = this.dequeue();
    contract.summary.localSymbol = this.dequeue();
    contract.marketName = this.dequeue();
    contract.summary.tradingClass = this.dequeue();

    var distance = this.dequeue();
    var benchmark = this.dequeue();
    var projection = this.dequeue();
    var legsStr = null;

    if (version &#x3e;= 2) {
      legsStr = this.dequeue();
    }

    this._emit(&#x27;scannerData&#x27;, tickerId, rank, contract, distance,
                                         benchmark, projection, legsStr);
  }

  this._emit(&#x27;scannerDataEnd&#x27;, tickerId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._SCANNER_PARAMETERS" id="apidoc.element.ib.incoming.prototype._SCANNER_PARAMETERS">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_SCANNER_PARAMETERS
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_SCANNER_PARAMETERS = function () {
  var version = this.dequeueInt();
  var xml = this.dequeue();

  this._emit(&#x27;scannerParameters&#x27;, xml);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._TICK_EFP" id="apidoc.element.ib.incoming.prototype._TICK_EFP">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_EFP
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_TICK_EFP = function () {
  var version = this.dequeueInt();
  var tickerId = this.dequeueInt();
  var tickType = this.dequeueInt();
  var basisPoints = this.dequeueFloat();
  var formattedBasisPoints = this.dequeue();
  var impliedFuturesPrice = this.dequeueFloat();
  var holdDays = this.dequeueInt();
  var futureExpiry = this.dequeue();
  var dividendImpact = this.dequeueFloat();
  var dividendsToExpiry = this.dequeueFloat();

  this._emit(&#x27;tickEFP&#x27;, tickerId, tickType, basisPoints, formattedBasisPoints,
                                   impliedFuturesPrice, holdDays, futureExpiry,
                                   dividendImpact, dividendsToExpiry);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._TICK_GENERIC" id="apidoc.element.ib.incoming.prototype._TICK_GENERIC">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_GENERIC
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_TICK_GENERIC = function () {
  var version = this.dequeueInt();
  var tickerId = this.dequeueInt();
  var tickType = this.dequeueInt();
  var value = this.dequeueFloat();

  this._emit(&#x27;tickGeneric&#x27;, tickerId, tickType, value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._TICK_OPTION_COMPUTATION" id="apidoc.element.ib.incoming.prototype._TICK_OPTION_COMPUTATION">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_OPTION_COMPUTATION
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_TICK_OPTION_COMPUTATION = function () {
  var version = this.dequeueInt();
  var tickerId = this.dequeueInt();
  var tickType = this.dequeueInt();
  var impliedVol = this.dequeueFloat();

  if (impliedVol &#x3c; 0) {  // -1 is the &#x22;not yet computed&#x22; indicator
    impliedVol = Number.MAX_VALUE;
  }

  var delta = this.dequeueFloat();

  if (Math.abs(delta) &#x3e; 1) {  // -2 is the &#x22;not yet computed&#x22; indicator
    delta = Number.MAX_VALUE;
  }

  var optPrice = Number.MAX_VALUE;
  var pvDividend = Number.MAX_VALUE;
  var gamma = Number.MAX_VALUE;
  var vega = Number.MAX_VALUE;
  var theta = Number.MAX_VALUE;
  var undPrice = Number.MAX_VALUE;

  if (version &#x3e;= 6 || tickType == C.TICK_TYPE.MODEL_OPTION) {  // introduced in version == 5
    optPrice = this.dequeueFloat();

    if (optPrice &#x3c; 0) {  // -1 is the &#x22;not yet computed&#x22; indicator
      optPrice = Number.MAX_VALUE;
    }

    pvDividend = this.dequeueFloat();

    if (pvDividend &#x3c; 0) {  // -1 is the &#x22;not yet computed&#x22; indicator
      pvDividend = Number.MAX_VALUE;
    }
  }

  if (version &#x3e;= 6) {
    gamma = this.dequeueFloat();

    if (Math.abs(gamma) &#x3e; 1) {  // -2 is the &#x22;not yet computed&#x22; indicator
      gamma = Number.MAX_VALUE;
    }

    vega = this.dequeueFloat();

    if (Math.abs(vega) &#x3e; 1) {  // -2 is the &#x22;not yet computed&#x22; indicator
      vega = Number.MAX_VALUE;
    }

    theta = this.dequeueFloat();

    if (Math.abs(theta) &#x3e; 1) {  // -2 is the &#x22;not yet computed&#x22; indicator
      theta = Number.MAX_VALUE;
    }

    undPrice = this.dequeueFloat();

    if (undPrice &#x3c; 0) {  // -1 is the &#x22;not yet computed&#x22; indicator
      undPrice = Number.MAX_VALUE;
    }
  }

  this._emit(&#x27;tickOptionComputation&#x27;, tickerId, tickType, impliedVol, delta, optPrice, pvDividend, gamma, vega, theta, undPrice);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._TICK_PRICE" id="apidoc.element.ib.incoming.prototype._TICK_PRICE">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_PRICE
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_TICK_PRICE = function () {
  var version = this.dequeueInt();
  var tickerId = this.dequeueInt();
  var tickType = this.dequeueInt();
  var price = this.dequeueFloat();
  var size = 0;

  if (version &#x3e;= 2) {
    size = this.dequeueInt();
  }

  var canAutoExecute = 0;

  if (version &#x3e;= 3) {
    canAutoExecute = this.dequeueBool();
  }

  this._emit(&#x27;tickPrice&#x27;, tickerId, tickType, price, canAutoExecute);

  var sizeTickType = -1;

  if (version &#x3e;= 2) {
    sizeTickType = -1 ; // not a tick

    switch (tickType) {
    case 1:  // BID
      sizeTickType = 0;  // BID_SIZE
      break;
    case 2:  // ASK
      sizeTickType = 3;  // ASK_SIZE
      break;
    case 4:  // LAST
      sizeTickType = 5;  // LAST_SIZE
      break;
    default:
      break;
    }

    if (sizeTickType != -1) {
      this._emit(&#x27;tickSize&#x27;, tickerId, sizeTickType, size);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._TICK_SIZE" id="apidoc.element.ib.incoming.prototype._TICK_SIZE">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_SIZE
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_TICK_SIZE = function () {
  var version = this.dequeueInt();
  var tickerId = this.dequeueInt();
  var tickType = this.dequeueInt();
  var size = this.dequeueInt();

  this._emit(&#x27;tickSize&#x27;, tickerId, tickType, size);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._TICK_SNAPSHOT_END" id="apidoc.element.ib.incoming.prototype._TICK_SNAPSHOT_END">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_SNAPSHOT_END
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_TICK_SNAPSHOT_END = function () {
  var version = this.dequeueInt();
  var reqId = this.dequeueInt();

  this._emit(&#x27;tickSnapshotEnd&#x27;, reqId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._TICK_STRING" id="apidoc.element.ib.incoming.prototype._TICK_STRING">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_TICK_STRING
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_TICK_STRING = function () {
  var version = this.dequeueInt();
  var tickerId = this.dequeueInt();
  var tickType = this.dequeueInt();
  var value = this.dequeue();

  this._emit(&#x27;tickString&#x27;, tickerId, tickType, value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype._emit" id="apidoc.element.ib.incoming.prototype._emit">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>_emit
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_emit = function () {
  this._emitQueue.push(arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._emitQueue = [];
}

Incoming.prototype._ACCT_DOWNLOAD_END = function () {
var version = this.dequeueInt();
var accountName = this.dequeue();

this.<span class="apidocCodeKeywordSpan">_emit</span>(&#x27;accountDownloadEnd&#x27;, accountName);
};

Incoming.prototype._ACCOUNT_SUMMARY = function () {
var version = this.dequeueInt();
var reqId = this.dequeueInt();
var account = this.dequeue();
var tag = this.dequeue();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype.dequeue" id="apidoc.element.ib.incoming.prototype.dequeue">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>dequeue
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dequeue = function () {
  if (this._dataQueue.length == 0) {
    throw new errors.UnderrunError();
  }
  var result = this._dataQueue.shift();
  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

this._dataQueue = [];
this._emitQueue = [];
}

Incoming.prototype._ACCT_DOWNLOAD_END = function () {
var version = this.dequeueInt();
var accountName = this.<span class="apidocCodeKeywordSpan">dequeue</span>();

this._emit(&#x27;accountDownloadEnd&#x27;, accountName);
};

Incoming.prototype._ACCOUNT_SUMMARY = function () {
var version = this.dequeueInt();
var reqId = this.dequeueInt();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype.dequeueBool" id="apidoc.element.ib.incoming.prototype.dequeueBool">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>dequeueBool
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dequeueBool = function () {
  return !!parseInt(this.dequeue(), 10);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
contract.cusip = this.dequeue();
contract.coupon = this.dequeueFloat();
contract.maturity = this.dequeue();
contract.issueDate  = this.dequeue();
contract.ratings = this.dequeue();
contract.bondType = this.dequeue();
contract.couponType = this.dequeue();
contract.convertible = this.<span class="apidocCodeKeywordSpan">dequeueBool</span>();
contract.callable = this.dequeueBool();
contract.putable = this.dequeueBool();
contract.descAppend = this.dequeue();
contract.summary.exchange = this.dequeue();
contract.summary.currency = this.dequeue();
contract.marketName = this.dequeue();
contract.summary.tradingClass = this.dequeue();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype.dequeueFloat" id="apidoc.element.ib.incoming.prototype.dequeueFloat">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>dequeueFloat
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dequeueFloat = function () {
  return parseFloat(this.dequeue());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Incoming.prototype._COMMISSION_REPORT = function () {
  var version = this.dequeueInt();

  var commissionReport = {};
  commissionReport.execId = this.dequeue();
  commissionReport.commission = this.<span class="apidocCodeKeywordSpan">dequeueFloat</span>();
  commissionReport.currency = this.dequeue();
  commissionReport.realizedPNL = this.dequeueFloat();
  commissionReport.yield = this.dequeueFloat();
  commissionReport.yieldRedemptionDate = this.dequeueInt();

  this._emit(&#x27;commissionReport&#x27;, commissionReport);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype.dequeueInt" id="apidoc.element.ib.incoming.prototype.dequeueInt">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>dequeueInt
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dequeueInt = function () {
  return parseInt(this.dequeue(), 10);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._controller = controller;

this._dataQueue = [];
this._emitQueue = [];
}

Incoming.prototype._ACCT_DOWNLOAD_END = function () {
var version = this.<span class="apidocCodeKeywordSpan">dequeueInt</span>();
var accountName = this.dequeue();

this._emit(&#x27;accountDownloadEnd&#x27;, accountName);
};

Incoming.prototype._ACCOUNT_SUMMARY = function () {
var version = this.dequeueInt();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype.enqueue" id="apidoc.element.ib.incoming.prototype.enqueue">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>enqueue
        <span class="apidocSignatureSpan">(tokens)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">enqueue = function (tokens) {
  this._dataQueue = this._dataQueue.concat(tokens);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
} else {
  this._dataFragment = &#x27;&#x27;;
}
tokens = tokens.slice(0, -1);
this._controller.emit(&#x27;received&#x27;, tokens.slice(0), data);

// Process data queue
this._controller._incoming.<span class="apidocCodeKeywordSpan">enqueue</span>(tokens);

if (this._neverReceived) {
  this._controller._serverVersion = parseInt(this._controller._incoming.dequeue(), 10);
  this._controller._serverConnectionTime = this._controller._incoming.dequeue();
  this._controller.emit(&#x27;server&#x27;, this._controller._serverVersion, this._controller._serverConnectionTime);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.incoming.prototype.process" id="apidoc.element.ib.incoming.prototype.process">
        function <span class="apidocSignatureSpan">ib.incoming.prototype.</span>process
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">process = function () {
  var constKey;
  var token;
  var dataQueueSnapshot;

  while (true) {
    dataQueueSnapshot = this._dataQueue.slice();

    try {
      // Clear the Emit Queue; if this doesn&#x27;t get cleared, it piles up whenever there&#x27;s an error (added by heberallred)
      this._emitQueue = [];

      token = this.dequeueInt();
      constKey = this._controller._ib.util.incomingToString(token);

      if (constKey &#x26;&#x26; _.has(this.constructor.prototype, &#x27;_&#x27; + constKey) &#x26;&#x26; _.isFunction(this[&#x27;_&#x27; + constKey])) {
        this[&#x27;_&#x27; + constKey]();
      } else {
        this._controller.emitError(&#x27;Unknown incoming first token: &#x27; + token);
      }
    } catch (e) {
      if (!(e instanceof errors.UnderrunError)) {
        throw e;
      }
      // Put data back in the queue, and don&#x27;t emit any events.
      this._dataQueue = this._dataQueue.concat(dataQueueSnapshot);
      return;
    }
    // Drain _emitQueue.
    var self = this;
    var toEmit = this._emitQueue;
    this._emitQueue = [];
    _.forEach(toEmit, function (payload) {
      self._controller.emit.apply(self._controller, payload);
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (this._neverReceived) {
  this._controller._serverVersion = parseInt(this._controller._incoming.dequeue(), 10);
  this._controller._serverConnectionTime = this._controller._incoming.dequeue();
  this._controller.emit(&#x27;server&#x27;, this._controller._serverVersion, this._controller._serverConnectionTime);
}

this._controller._incoming.<span class="apidocCodeKeywordSpan">process</span>();

// Async
if (this._waitingAsync) {
  this._waitingAsync = false;
  this._controller.resume();
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.order" id="apidoc.module.ib.order">module ib.order</a></h1>


    <h2>
        <a href="#apidoc.element.ib.order.limit" id="apidoc.element.ib.order.limit">
        function <span class="apidocSignatureSpan">ib.order.</span>limit
        <span class="apidocSignatureSpan">(action, quantity, price, transmitOrder)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">limit = function (action, quantity, price, transmitOrder) {
  assert(_.isString(action), &#x27;Action must be a string.&#x27;);
  assert(_.isNumber(quantity), &#x27;Quantity must be a number.&#x27;);
  assert(_.isNumber(price), &#x27;Price must be a number.&#x27;);

  if (transmitOrder === undefined) {
    transmitOrder = true;
  }

  return {
    action: action,
    lmtPrice: price,
    orderType: &#x27;LMT&#x27;,
    totalQuantity: quantity,
    transmit: transmitOrder
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  console.error(&#x27;error --- %s&#x27;, err.message);
}).on(&#x27;result&#x27;, function (event, args) {
  console.log(&#x27;%s --- %s&#x27;, event, JSON.stringify(args));
}).once(&#x27;nextValidId&#x27;, function (orderId) {
  ib.placeOrder(
    orderId,
    ib.contract.stock(&#x27;AAPL&#x27;),
    ib.order.<span class="apidocCodeKeywordSpan">limit</span>(&#x27;BUY&#x27;, 1, 0.01)  // safe, unreal value used for demo
  );
  ib.reqOpenOrders();
}).once(&#x27;openOrderEnd&#x27;, function () {
  ib.disconnect();
})

ib.connect()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.order.market" id="apidoc.element.ib.order.market">
        function <span class="apidocSignatureSpan">ib.order.</span>market
        <span class="apidocSignatureSpan">(action, quantity, transmitOrder, goodAfterTime, goodTillDate)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">market = function (action, quantity, transmitOrder, goodAfterTime, goodTillDate) {
  assert(_.isString(action), &#x27;Action must be a string.&#x27;);
  assert(_.isNumber(quantity), &#x27;Quantity must be a string.&#x27;);

  if (transmitOrder === undefined) {
    transmitOrder = true;
  }

  if ( goodAfterTime === undefined ) {
    goodAfterTime = &#x27;&#x27;;
  }

  if ( goodTillDate === undefined ) {
    goodTillDate = &#x27;&#x27;;
  }

  return {
    action: action,
    orderType: &#x27;MKT&#x27;,
    totalQuantity: quantity,
    transmit: transmitOrder,
    goodAfterTime: goodAfterTime,
    goodTillDate: goodTillDate
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.contract.forex(symbol, currency)
.contract.future(symbol, expiry, currency, exchange)
.contract.option(symbol, expiry, strike, right, exchange, currency)
.contract.stock(symbol, exchange, currency)

// Order
.order.limit(action, quantity, price)
.order.<span class="apidocCodeKeywordSpan">market</span>(action, quantity)
.order.stop(action, quantity, price)
.order.stopLimit(action, quantity, limitPrice, stopPrice)
```

### Util

```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.order.marketClose" id="apidoc.element.ib.order.marketClose">
        function <span class="apidocSignatureSpan">ib.order.</span>marketClose
        <span class="apidocSignatureSpan">(action, quantity, transmitOrder)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">marketClose = function (action, quantity, transmitOrder) {
  assert(_.isString(action), &#x27;Action must be a string.&#x27;);
  assert(_.isNumber(quantity), &#x27;Quantity must be a string.&#x27;);

  if (transmitOrder === undefined) {
    transmitOrder = true;
  }

  return {
    action: action,
    orderType: &#x27;MOC&#x27;,
    totalQuantity: quantity,
    transmit: transmitOrder
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.order.stop" id="apidoc.element.ib.order.stop">
        function <span class="apidocSignatureSpan">ib.order.</span>stop
        <span class="apidocSignatureSpan">(action, quantity, price, transmitOrder, parentId, tif)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function (action, quantity, price, transmitOrder, parentId, tif) {
  assert(_.isString(action), &#x27;Action must be a string.&#x27;);
  assert(_.isNumber(quantity), &#x27;Quantity must be a number.&#x27;);
  assert(_.isNumber(price), &#x27;Price must be a number.&#x27;);

  return {
    action: action,
    auxPrice: price,
    orderType: &#x27;STP&#x27;,
    totalQuantity: quantity,
    transmit: transmitOrder || true,
    parentId: parentId || 0,
    tif: tif || &#x27;DAY&#x27;
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.contract.future(symbol, expiry, currency, exchange)
.contract.option(symbol, expiry, strike, right, exchange, currency)
.contract.stock(symbol, exchange, currency)

// Order
.order.limit(action, quantity, price)
.order.market(action, quantity)
.order.<span class="apidocCodeKeywordSpan">stop</span>(action, quantity, price)
.order.stopLimit(action, quantity, limitPrice, stopPrice)
```

### Util

```js
.incomingToString(incoming)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.order.stopLimit" id="apidoc.element.ib.order.stopLimit">
        function <span class="apidocSignatureSpan">ib.order.</span>stopLimit
        <span class="apidocSignatureSpan">(action, quantity, limitPrice, stopPrice, transmitOrder, parentId, tif)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stopLimit = function (action, quantity, limitPrice, stopPrice, transmitOrder, parentId, tif) {
  assert(_.isString(action), &#x27;Action must be a string.&#x27;);
  assert(_.isNumber(quantity), &#x27;Quantity must be a string.&#x27;);
  assert(_.isNumber(stopPrice), &#x27;Stop price must be a number.&#x27;);
  assert(_.isNumber(limitPrice), &#x27;Limit price must be a number.&#x27;);

  return {
    action: action,
    lmtPrice: limitPrice,
    auxPrice: stopPrice,
    orderType: &#x27;STP LMT&#x27;,
    totalQuantity: quantity,
    transmit: transmitOrder || true,
    parentId: parentId || 0,
    tif: tif || &#x27;DAY&#x27;
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.contract.option(symbol, expiry, strike, right, exchange, currency)
.contract.stock(symbol, exchange, currency)

// Order
.order.limit(action, quantity, price)
.order.market(action, quantity)
.order.stop(action, quantity, price)
.order.<span class="apidocCodeKeywordSpan">stopLimit</span>(action, quantity, limitPrice, stopPrice)
```

### Util

```js
.incomingToString(incoming)
.numberToString(number)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.order.trailingStop" id="apidoc.element.ib.order.trailingStop">
        function <span class="apidocSignatureSpan">ib.order.</span>trailingStop
        <span class="apidocSignatureSpan">(action, quantity, auxPrice, tif, transmitOrder, parentId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trailingStop = function (action, quantity, auxPrice, tif, transmitOrder, parentId) {
  assert(_.isString(action), &#x27;Action must be a string.&#x27;);
  assert(_.isNumber(quantity), &#x27;Quantity must be a number.&#x27;);
  assert(_.isNumber(auxPrice), &#x27;Price must be a number.&#x27;);

  return {
    action: action,
    totalQuantity: quantity,
    orderType: &#x27;TRAIL&#x27;,  // https://www.interactivebrokers.com/en/software/api/apiguide/tables/supported_order_types.htm
    auxPrice: auxPrice,
    tif: tif,  // note - TRAIL orders are only triggered during the trading hours of the contract
    transmit: transmitOrder || true,
    parentId: parentId || 0
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.outgoing" id="apidoc.module.ib.outgoing">module ib.outgoing</a></h1>


    <h2>
        <a href="#apidoc.element.ib.outgoing.outgoing" id="apidoc.element.ib.outgoing.outgoing">
        function <span class="apidocSignatureSpan">ib.</span>outgoing
        <span class="apidocSignatureSpan">(controller)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Outgoing(controller) {
  this._controller = controller;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.outgoing.prototype" id="apidoc.module.ib.outgoing.prototype">module ib.outgoing.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype._send" id="apidoc.element.ib.outgoing.prototype._send">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>_send
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rate_limited_function() {
  var ctx = this;
  var args = Array.prototype.slice.call(arguments);
  if (count &#x3c;= 0) {
    fifo.push([ctx, args]);
    return;
  }

  count = count - 1;
  call_next([ctx, args]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this._socket.send(data, async);
} else {
  this.emitError(&#x27;Cannot send data when disconnected.&#x27;);
}
};

Controller.prototype._sendAsync = function (data) {
this.<span class="apidocCodeKeywordSpan">_send</span>(data, true);
};

Controller.prototype.emit = function () {
var args = Array.prototype.slice.call(arguments);

if (args[0] === &#x27;error&#x27; &#x26;&#x26; !!args[1] &#x26;&#x26; args[1].message) {
  args[1] = args[1].message;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.calculateImpliedVolatility" id="apidoc.element.ib.outgoing.prototype.calculateImpliedVolatility">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>calculateImpliedVolatility
        <span class="apidocSignatureSpan">(reqId, contract, optionPrice, underPrice)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">calculateImpliedVolatility = function (reqId, contract, optionPrice, underPrice) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.REQ_CALC_IMPLIED_VOLAT) {
    return this._controller.emitError(&#x27;It does not support calculate implied volatility requests.&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.TRADING_CLASS) {
    if (!_.isEmpty(contract.tradingClass)) {
      return this._controller.emitError(&#x27;It does not support tradingClass parameter in calculateImpliedVolatility.&#x27;);
    }
  }

  var version = 2;

  var args = [C.OUTGOING.REQ_CALC_IMPLIED_VOLAT, version, reqId];

  // send contract fields
  args.push(contract.conId);
  args.push(contract.symbol);
  args.push(contract.secType);
  args.push(contract.expiry);
  args.push(contract.strike);
  args.push(contract.right);
  args.push(contract.multiplier);
  args.push(contract.exchange);
  args.push(contract.primaryExch);
  args.push(contract.currency);
  args.push(contract.localSymbol);

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.tradingClass);
  }

  args.push(optionPrice);
  args.push(underPrice);

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.connect()
.disconnect()
```

### Commands

```js
.<span class="apidocCodeKeywordSpan">calculateImpliedVolatility</span>(reqId, contract, optionPrice, underPrice)
.calculateOptionPrice(reqId, contract, volatility, underPrice)
.cancelAccountSummary(reqId)
.cancelCalculateImpliedVolatility(reqId)
.cancelCalculateOptionPrice(reqId)
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.calculateOptionPrice" id="apidoc.element.ib.outgoing.prototype.calculateOptionPrice">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>calculateOptionPrice
        <span class="apidocSignatureSpan">(reqId, contract, volatility, underPrice)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">calculateOptionPrice = function (reqId, contract, volatility, underPrice) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.REQ_CALC_OPTION_PRICE) {
    return this._controller.emitError(&#x27;It does not support calculate option price requests.&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.TRADING_CLASS) {
    if (!_.isEmpty(contract.tradingClass)) {
      return this._controller.emitError(&#x27;It does not support tradingClass parameter in calculateOptionPrice.&#x27;);
    }
  }

  var version = 2;

  var args = [C.OUTGOING.REQ_CALC_OPTION_PRICE, version, reqId];

  // send contract fields
  args.push(contract.conId);
  args.push(contract.symbol);
  args.push(contract.secType);
  args.push(contract.expiry);
  args.push(contract.strike);
  args.push(contract.right);
  args.push(contract.multiplier);
  args.push(contract.exchange);
  args.push(contract.primaryExch);
  args.push(contract.currency);
  args.push(contract.localSymbol);

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.tradingClass);
  }

  args.push(volatility);
  args.push(underPrice);

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.disconnect()
```

### Commands

```js
.calculateImpliedVolatility(reqId, contract, optionPrice, underPrice)
.<span class="apidocCodeKeywordSpan">calculateOptionPrice</span>(reqId, contract, volatility, underPrice)
.cancelAccountSummary(reqId)
.cancelCalculateImpliedVolatility(reqId)
.cancelCalculateOptionPrice(reqId)
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelAccountSummary" id="apidoc.element.ib.outgoing.prototype.cancelAccountSummary">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelAccountSummary
        <span class="apidocSignatureSpan">(reqId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelAccountSummary = function (reqId) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.ACCT_SUMMARY) {
    return this._controller.emitError(&#x27;It does not support account summary cancellation.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.CANCEL_ACCOUNT_SUMMARY, version, reqId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

### Commands

```js
.calculateImpliedVolatility(reqId, contract, optionPrice, underPrice)
.calculateOptionPrice(reqId, contract, volatility, underPrice)
.<span class="apidocCodeKeywordSpan">cancelAccountSummary</span>(reqId)
.cancelCalculateImpliedVolatility(reqId)
.cancelCalculateOptionPrice(reqId)
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelCalculateImpliedVolatility" id="apidoc.element.ib.outgoing.prototype.cancelCalculateImpliedVolatility">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelCalculateImpliedVolatility
        <span class="apidocSignatureSpan">(reqId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelCalculateImpliedVolatility = function (reqId) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.CANCEL_CALC_IMPLIED_VOLAT) {
    return this._controller.emitError(&#x27;It does not support calculate implied volatility cancellation.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.CANCEL_CALC_IMPLIED_VOLAT, version, reqId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### Commands

```js
.calculateImpliedVolatility(reqId, contract, optionPrice, underPrice)
.calculateOptionPrice(reqId, contract, volatility, underPrice)
.cancelAccountSummary(reqId)
.<span class="apidocCodeKeywordSpan">cancelCalculateImpliedVolatility</span>(reqId)
.cancelCalculateOptionPrice(reqId)
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
.cancelOrder(id)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelCalculateOptionPrice" id="apidoc.element.ib.outgoing.prototype.cancelCalculateOptionPrice">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelCalculateOptionPrice
        <span class="apidocSignatureSpan">(reqId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelCalculateOptionPrice = function (reqId) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.CANCEL_CALC_OPTION_PRICE) {
    return this._controller.emitError(&#x27;It does not support calculate option price cancellation.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.CANCEL_CALC_OPTION_PRICE, version, reqId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### Commands

```js
.calculateImpliedVolatility(reqId, contract, optionPrice, underPrice)
.calculateOptionPrice(reqId, contract, volatility, underPrice)
.cancelAccountSummary(reqId)
.cancelCalculateImpliedVolatility(reqId)
.<span class="apidocCodeKeywordSpan">cancelCalculateOptionPrice</span>(reqId)
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
.cancelOrder(id)
.cancelPositions()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelFundamentalData" id="apidoc.element.ib.outgoing.prototype.cancelFundamentalData">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelFundamentalData
        <span class="apidocSignatureSpan">(reqId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelFundamentalData = function (reqId) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.FUNDAMENTAL_DATA) {
    return this._controller.emitError(&#x27;It does not support fundamental data requests.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.CANCEL_FUNDAMENTAL_DATA, version, reqId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```js
.calculateImpliedVolatility(reqId, contract, optionPrice, underPrice)
.calculateOptionPrice(reqId, contract, volatility, underPrice)
.cancelAccountSummary(reqId)
.cancelCalculateImpliedVolatility(reqId)
.cancelCalculateOptionPrice(reqId)
.<span class="apidocCodeKeywordSpan">cancelFundamentalData</span>(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
.cancelOrder(id)
.cancelPositions()
.cancelRealTimeBars(tickerId)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelHistoricalData" id="apidoc.element.ib.outgoing.prototype.cancelHistoricalData">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelHistoricalData
        <span class="apidocSignatureSpan">(tickerId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelHistoricalData = function (tickerId) {
  if (this._controller._serverVersion &#x3c; 24) {
    return this._controller.emitError(&#x27;It does not support historical data query cancellation.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.CANCEL_HISTORICAL_DATA, version, tickerId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```js
.calculateImpliedVolatility(reqId, contract, optionPrice, underPrice)
.calculateOptionPrice(reqId, contract, volatility, underPrice)
.cancelAccountSummary(reqId)
.cancelCalculateImpliedVolatility(reqId)
.cancelCalculateOptionPrice(reqId)
.cancelFundamentalData(reqId)
.<span class="apidocCodeKeywordSpan">cancelHistoricalData</span>(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
.cancelOrder(id)
.cancelPositions()
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelMktData" id="apidoc.element.ib.outgoing.prototype.cancelMktData">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelMktData
        <span class="apidocSignatureSpan">(tickerId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelMktData = function (tickerId) {
  var version = 1;

  this._send(C.OUTGOING.CANCEL_MKT_DATA, version, tickerId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.calculateImpliedVolatility(reqId, contract, optionPrice, underPrice)
.calculateOptionPrice(reqId, contract, volatility, underPrice)
.cancelAccountSummary(reqId)
.cancelCalculateImpliedVolatility(reqId)
.cancelCalculateOptionPrice(reqId)
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.<span class="apidocCodeKeywordSpan">cancelMktData</span>(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
.cancelOrder(id)
.cancelPositions()
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelMktDepth" id="apidoc.element.ib.outgoing.prototype.cancelMktDepth">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelMktDepth
        <span class="apidocSignatureSpan">(tickerId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelMktDepth = function (tickerId) {
  if (this._controller._serverVersion &#x3c; 6) {
    return this._controller.emitError(&#x27;This feature is only available for versions of TWS &#x3e;=6.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.CANCEL_MKT_DEPTH, version, tickerId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.calculateOptionPrice(reqId, contract, volatility, underPrice)
.cancelAccountSummary(reqId)
.cancelCalculateImpliedVolatility(reqId)
.cancelCalculateOptionPrice(reqId)
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.<span class="apidocCodeKeywordSpan">cancelMktDepth</span>(tickerId)
.cancelNewsBulletins()
.cancelOrder(id)
.cancelPositions()
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelNewsBulletins" id="apidoc.element.ib.outgoing.prototype.cancelNewsBulletins">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelNewsBulletins
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelNewsBulletins = function () {
  var version = 1;

  this._send(C.OUTGOING.CANCEL_NEWS_BULLETINS, version);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelAccountSummary(reqId)
.cancelCalculateImpliedVolatility(reqId)
.cancelCalculateOptionPrice(reqId)
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.<span class="apidocCodeKeywordSpan">cancelNewsBulletins</span>()
.cancelOrder(id)
.cancelPositions()
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelOrder" id="apidoc.element.ib.outgoing.prototype.cancelOrder">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelOrder
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelOrder = function (id) {
  var version = 1;

  this._send(C.OUTGOING.CANCEL_ORDER, version, id);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelCalculateImpliedVolatility(reqId)
.cancelCalculateOptionPrice(reqId)
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
.<span class="apidocCodeKeywordSpan">cancelOrder</span>(id)
.cancelPositions()
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelPositions" id="apidoc.element.ib.outgoing.prototype.cancelPositions">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelPositions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelPositions = function () {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.ACCT_SUMMARY) {
    return this._controller.emitError(&#x27;It does not support position cancellation.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.CANCEL_POSITIONS, version);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelCalculateOptionPrice(reqId)
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
.cancelOrder(id)
.<span class="apidocCodeKeywordSpan">cancelPositions</span>()
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelRealTimeBars" id="apidoc.element.ib.outgoing.prototype.cancelRealTimeBars">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelRealTimeBars
        <span class="apidocSignatureSpan">(tickerId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelRealTimeBars = function (tickerId) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.REAL_TIME_BARS) {
    return this._controller.emitError(&#x27;It does not support realtime bar data query cancellation.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.CANCEL_REAL_TIME_BARS, version, tickerId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelFundamentalData(reqId)
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
.cancelOrder(id)
.cancelPositions()
.<span class="apidocCodeKeywordSpan">cancelRealTimeBars</span>(tickerId)
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.cancelScannerSubscription" id="apidoc.element.ib.outgoing.prototype.cancelScannerSubscription">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>cancelScannerSubscription
        <span class="apidocSignatureSpan">(tickerId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cancelScannerSubscription = function (tickerId) {
  if (this._controller._serverVersion &#x3c; 24) {
    return this._controller.emitError(&#x27;It does not support API scanner subscription.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.CANCEL_SCANNER_SUBSCRIPTION, version, tickerId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelHistoricalData(tickerId)
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
.cancelOrder(id)
.cancelPositions()
.cancelRealTimeBars(tickerId)
.<span class="apidocCodeKeywordSpan">cancelScannerSubscription</span>(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.exerciseOptions" id="apidoc.element.ib.outgoing.prototype.exerciseOptions">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>exerciseOptions
        <span class="apidocSignatureSpan">(tickerId, contract, exerciseAction, exerciseQuantity, account, override)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exerciseOptions = function (tickerId, contract, exerciseAction, exerciseQuantity, account, override) {
  var version = 2;

  if (this._controller._serverVersion &#x3c; 21) {
    return this._controller.emitError(&#x27;It does not support options exercise from the API.&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.TRADING_CLASS) {
    if (!_.isEmpty(contract.tradingClass) || contract.conId &#x3e; 0) {
      return this._controller.emitError(&#x27;It does not support conId and tradingClass parameters in exerciseOptions.&#x27;);
    }
  }

  var args = [C.OUTGOING.EXERCISE_OPTIONS, version, tickerId];

  // send contract fields
  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.conId);
  }

  args.push(contract.symbol);
  args.push(contract.secType);
  args.push(contract.expiry);
  args.push(contract.strike);
  args.push(contract.right);
  args.push(contract.multiplier);
  args.push(contract.exchange);
  args.push(contract.currency);
  args.push(contract.localSymbol);

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.tradingClass);
  }

  args.push(exerciseAction);
  args.push(exerciseQuantity);
  args.push(account);
  args.push(override);

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelMktData(tickerId)
.cancelMktDepth(tickerId)
.cancelNewsBulletins()
.cancelOrder(id)
.cancelPositions()
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
.<span class="apidocCodeKeywordSpan">exerciseOptions</span>(tickerId, contract, exerciseAction, exerciseQuantity, account, override
)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
.reqContractDetails(reqId, contract)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.placeOrder" id="apidoc.element.ib.outgoing.prototype.placeOrder">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>placeOrder
        <span class="apidocSignatureSpan">(id, contract, order)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">placeOrder = function (id, contract, order) {



  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.SCALE_ORDERS) {
    if (order.scaleInitLevelSize != Number.MAX_VALUE ||
        order.scalePriceIncrement != Number.MAX_VALUE) {
      return this._controller.emitError(&#x27;It does not support Scale orders.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.SSHORT_COMBO_LEGS) {
    if (_.isArray(contract.comboLegs)) {
      contract.comboLegs.forEach(function (comboLeg) {
        if (comboLeg.shortSaleSlot !== 0 || !_.isEmpty(comboLeg.designatedLocation)) {
          return this._controller.emitError(&#x27;It does not support SSHORT flag for combo legs.&#x27;);
        }
      }.bind(this));
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.WHAT_IF_ORDERS) {
    if (order.whatIf) {
      return this._controller.emitError(&#x27;It does not support what-if orders.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.UNDER_COMP) {
    if (contract.underComp) {
      return this._controller.emitError(&#x27;It does not support delta-neutral orders.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.SCALE_ORDERS2) {
    if (order.scaleSubsLevelSize !== Number.MAX_VALUE) {
      return this._controller.emitError(&#x27;It does not support Subsequent Level Size for Scale orders.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.ALGO_ORDERS) {
    if (!_.isEmpty(order.algoStrategy)) {
      return this._controller.emitError(&#x27;It does not support algo orders.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.NOT_HELD) {
    if (order.notHeld) {
      return this._controller.emitError(&#x27;It does not support notHeld parameter.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.SEC_ID_TYPE) {
    if (!_.isEmpty(contract.secIdType) || !_.isEmpty(contract.secId)) {
      return this._controller.emitError(&#x27;It does not support secIdType and secId parameters.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.PLACE_ORDER_CONID) {
    if (contract.conId &#x3e; 0) {
      return this._controller.emitError(&#x27;It does not support conId parameter.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.SSHORTX) {
    if (order.exemptCode !== -1) {
      return this._controller.emitError(&#x27;It does not support exemptCode parameter.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.SSHORTX) {
    if (_.isArray(contract.comboLegs)) {
      contract.comboLegs.forEach(function (comboLeg) {
        if (comboLeg.exemptCode !== -1) {
          return this._controller.emitError(&#x27;It does not support exemptCode parameter.&#x27;);
        }
      }.bind(this));
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.HEDGE_ORDERS) {
    if (!_.isEmpty(order.hedgeType)) {
      return this._controller.emitError(&#x27;It does not support hedge orders.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.OPT_OUT_SMART_ROUTING) {
    if (order.optOutSmartRouting) {
      return this._controller.emitError(&#x27;It does not support optOutSmartRouting parameter.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.DELTA_NEUTRAL_CONID) {
    if (order.deltaNeutralConId &#x3e; 0 ||
        !_.isEmpty(order.deltaNeutralSettlingFirm) ||
        !_.isEmpty(order.deltaNeutralClearingAccount) ||
        !_.isEmpty(order.deltaNeutralClearingIntent)) {
      return this._controller.emitError(&#x27;It does not support deltaNeutral parameters: ConId, SettlingFirm, ClearingAccount, ClearingIntent
.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.DELTA_NEUTRAL_OPEN_CLOSE) {
    if (!_.isEmpty(order.deltaNeutralOpenClose) ||
        order.deltaNeutralShortSale ||
        order.deltaNeutralShortSaleSlot &#x3e; 0 ||
        !_.isEmpty(order.deltaNeutralDesignatedLocation)) {
      return this._controller.emitError(&#x27;It does not support deltaNeutral parameters: OpenClose, ShortSale, ShortSaleSlot, DesignatedLocation
.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.SCALE_ORDER ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// host: &#x27;127.0.0.1&#x27;,
// port: 7496
}).on(&#x27;error&#x27;, function (err) {
console.error(&#x27;error --- %s&#x27;, err.message);
}).on(&#x27;result&#x27;, function (event, args) {
console.log(&#x27;%s --- %s&#x27;, event, JSON.stringify(args));
}).once(&#x27;nextValidId&#x27;, function (orderId) {
ib.<span class="apidocCodeKeywordSpan">placeOrder</span>(
  orderId,
  ib.contract.stock(&#x27;AAPL&#x27;),
  ib.order.limit(&#x27;BUY&#x27;, 1, 0.01)  // safe, unreal value used for demo
);
ib.reqOpenOrders();
}).once(&#x27;openOrderEnd&#x27;, function () {
ib.disconnect();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.replaceFA" id="apidoc.element.ib.outgoing.prototype.replaceFA">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>replaceFA
        <span class="apidocSignatureSpan">(faDataType, xml)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replaceFA = function (faDataType, xml) {
  if (this._controller._serverVersion &#x3c; 13) {
    return this._controller.emitError(&#x27;This feature is only available for versions of TWS &#x3e;= 13.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.REPLACE_FA, version, faDataType, xml);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelNewsBulletins()
.cancelOrder(id)
.cancelPositions()
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.<span class="apidocCodeKeywordSpan">replaceFA</span>(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
.reqContractDetails(reqId, contract)
.reqCurrentTime()
.reqExecutions(reqId, filter)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqAccountSummary" id="apidoc.element.ib.outgoing.prototype.reqAccountSummary">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqAccountSummary
        <span class="apidocSignatureSpan">(reqId, group, tags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqAccountSummary = function (reqId, group, tags) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.ACCT_SUMMARY) {
    return this._controller.emitError(&#x27;It does not support account summary requests.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.REQ_ACCOUNT_SUMMARY, version, reqId, group, tags);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelOrder(id)
.cancelPositions()
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.<span class="apidocCodeKeywordSpan">reqAccountSummary</span>(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
.reqContractDetails(reqId, contract)
.reqCurrentTime()
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqAccountUpdates" id="apidoc.element.ib.outgoing.prototype.reqAccountUpdates">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqAccountUpdates
        <span class="apidocSignatureSpan">(subscribe, acctCode)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqAccountUpdates = function (subscribe, acctCode) {
  var version = 2;

  if (this._controller._serverVersion &#x3e;= 9) {
    this._send(C.OUTGOING.REQ_ACCOUNT_DATA, version, subscribe, acctCode);
  } else {
    this._send(C.OUTGOING.REQ_ACCOUNT_DATA, version, subscribe);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelPositions()
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.<span class="apidocCodeKeywordSpan">reqAccountUpdates</span>(subscribe, acctCode)
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
.reqContractDetails(reqId, contract)
.reqCurrentTime()
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqAllOpenOrders" id="apidoc.element.ib.outgoing.prototype.reqAllOpenOrders">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqAllOpenOrders
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqAllOpenOrders = function () {
  var version = 1;

  this._send(C.OUTGOING.REQ_ALL_OPEN_ORDERS, version);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelRealTimeBars(tickerId)
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.<span class="apidocCodeKeywordSpan">reqAllOpenOrders</span>()
.reqAutoOpenOrders(bAutoBind)
.reqContractDetails(reqId, contract)
.reqCurrentTime()
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqAutoOpenOrders" id="apidoc.element.ib.outgoing.prototype.reqAutoOpenOrders">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqAutoOpenOrders
        <span class="apidocSignatureSpan">(bAutoBind)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqAutoOpenOrders = function (bAutoBind) {
  var version = 1;

  this._send(C.OUTGOING.REQ_AUTO_OPEN_ORDERS, version, bAutoBind);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.cancelScannerSubscription(tickerId)
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
.<span class="apidocCodeKeywordSpan">reqAutoOpenOrders</span>(bAutoBind)
.reqContractDetails(reqId, contract)
.reqCurrentTime()
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqContractDetails" id="apidoc.element.ib.outgoing.prototype.reqContractDetails">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqContractDetails
        <span class="apidocSignatureSpan">(reqId, contract)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqContractDetails = function (reqId, contract) {
  if (this._controller._serverVersion &#x3c; 4) {
    return this._controller.emitError(&#x27;This feature is only available for versions of TWS &#x3e;=4&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.SEC_ID_TYPE) {
    if (!_.isEmpty(contract.secIdType) || !_.isEmpty(contract.secId)) {
      return this._controller.emitError(&#x27;It does not support secIdType and secId parameters.&#x27;);
    }
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.TRADING_CLASS) {
    if (!_.isEmpty(contract.tradingClass)) {
      return this._controller.emitError(&#x27;It does not support tradingClass parameter in reqContractDetails.&#x27;);
    }
  }

  var version = 7;

  // send req mkt data msg
  var args = [C.OUTGOING.REQ_CONTRACT_DATA, version];

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.CONTRACT_DATA_CHAIN) {
    args.push(reqId);
  }

  // send contract fields
  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.CONTRACT_CONID) {
    args.push(contract.conId);
  }

  args.push(contract.symbol);
  args.push(contract.secType);
  args.push(contract.expiry);
  args.push(contract.strike);
  args.push(contract.right);

  if (this._controller._serverVersion &#x3e;= 15) {
    args.push(contract.multiplier);
  }

  args.push(contract.exchange);
  args.push(contract.currency);
  args.push(contract.localSymbol);

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.tradingClass);
  }

  if (this._controller._serverVersion &#x3e;= 31) {
    args.push(contract.includeExpired);
  }

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.SEC_ID_TYPE) {
    args.push(contract.secIdType);
    args.push(contract.secId);
  }

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.exerciseOptions(tickerId, contract, exerciseAction, exerciseQuantity, account, override)
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
.<span class="apidocCodeKeywordSpan">reqContractDetails</span>(reqId, contract)
.reqCurrentTime()
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
.reqManagedAccts()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqCurrentTime" id="apidoc.element.ib.outgoing.prototype.reqCurrentTime">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqCurrentTime
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqCurrentTime = function () {
  if (this._controller._serverVersion &#x3c; 33) {
    return this._controller.emitError(&#x27;It does not support current time requests.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.REQ_CURRENT_TIME, version);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.placeOrder(id, contract, order)
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
.reqContractDetails(reqId, contract)
.<span class="apidocCodeKeywordSpan">reqCurrentTime</span>()
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
.reqManagedAccts()
.reqMarketDataType(marketDataType)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqExecutions" id="apidoc.element.ib.outgoing.prototype.reqExecutions">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqExecutions
        <span class="apidocSignatureSpan">(reqId, filter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqExecutions = function (reqId, filter) {
  // NOTE: Time format must be &#x27;yyyymmdd-hh:mm:ss&#x27; E.g. &#x27;20030702-14:55&#x27;

  var version = 3;

  // send req open orders msg
  var args = [C.OUTGOING.REQ_EXECUTIONS, version];

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.EXECUTION_DATA_CHAIN) {
    args.push(reqId);
  }

  // Send the execution rpt filter data (srv v9 and above)
  args.push(filter.clientId);
  args.push(filter.acctCode);
  args.push(filter.time);
  args.push(filter.symbol);
  args.push(filter.secType);
  args.push(filter.exchange);
  args.push(filter.side);

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.replaceFA(faDataType, xml)
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
.reqContractDetails(reqId, contract)
.reqCurrentTime()
.<span class="apidocCodeKeywordSpan">reqExecutions</span>(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
.reqManagedAccts()
.reqMarketDataType(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqFundamentalData" id="apidoc.element.ib.outgoing.prototype.reqFundamentalData">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqFundamentalData
        <span class="apidocSignatureSpan">(reqId, contract, reportType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqFundamentalData = function (reqId, contract, reportType) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.FUNDAMENTAL_DATA) {
    return this._controller.emitError(&#x27;It does not support fundamental data requests.&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.TRADING_CLASS) {
    if (contract.conId &#x3e; 0) {
      return this._controller.emitError(&#x27;It does not support conId parameter in reqFundamentalData.&#x27;);
    }
  }

  var version = 2;

  // send req fund data msg
  var args = [C.OUTGOING.REQ_FUNDAMENTAL_DATA, version, reqId];

  // send contract fields
  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.conId);
  }

  args.push(contract.symbol);
  args.push(contract.secType);
  args.push(contract.exchange);
  args.push(contract.primaryExch);
  args.push(contract.currency);
  args.push(contract.localSymbol);

  args.push(reportType);

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqAccountSummary(reqId, group, tags)
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
.reqContractDetails(reqId, contract)
.reqCurrentTime()
.reqExecutions(reqId, filter)
.<span class="apidocCodeKeywordSpan">reqFundamentalData</span>(reqId, contract, reportType)
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
.reqManagedAccts()
.reqMarketDataType(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqGlobalCancel" id="apidoc.element.ib.outgoing.prototype.reqGlobalCancel">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqGlobalCancel
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqGlobalCancel = function () {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.REQ_GLOBAL_CANCEL) {
    return this._controller.emitError(&#x27;It does not support globalCancel requests.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.REQ_GLOBAL_CANCEL, version);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqAccountUpdates(subscribe, acctCode)
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
.reqContractDetails(reqId, contract)
.reqCurrentTime()
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.<span class="apidocCodeKeywordSpan">reqGlobalCancel</span>()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
.reqManagedAccts()
.reqMarketDataType(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqHistoricalData" id="apidoc.element.ib.outgoing.prototype.reqHistoricalData">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqHistoricalData
        <span class="apidocSignatureSpan">(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqHistoricalData = function (tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate) {
  var version = 5;

  if (this._controller._serverVersion &#x3c; 16) {
    return this._controller.emitError(&#x27;It does not support historical data backfill.&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.TRADING_CLASS) {
    if (!_.isEmpty(contract.tradingClass) || contract.conId &#x3e; 0) {
      return this._controller.emitError(&#x27;It does not support conId and tradingClass parameters in reqHistroricalData.&#x27;);
    }
  }

  var args = [C.OUTGOING.REQ_HISTORICAL_DATA, version, tickerId];

  // send contract fields
  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.conId);
  }

  args.push(contract.symbol);
  args.push(contract.secType);
  args.push(contract.expiry);
  args.push(contract.strike);
  args.push(contract.right);
  args.push(contract.multiplier);
  args.push(contract.exchange);
  args.push(contract.primaryExch);
  args.push(contract.currency);
  args.push(contract.localSymbol);

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.tradingClass);
  }

  if (this._controller._serverVersion &#x3e;= 31) {
    args.push(!!contract.includeExpired);
  }

  if (this._controller._serverVersion &#x3e;= 20) {
    args.push(endDateTime);
    args.push(barSizeSetting);
  }

  args.push(durationStr);
  args.push(useRTH);
  args.push(whatToShow);

  if (this._controller._serverVersion &#x3e; 16) {
    args.push(formatDate);
  }



  if (_.isString(contract.secType) &#x26;&#x26;
      C.BAG_SEC_TYPE.toUpperCase() === contract.secType.toUpperCase()) {
    if (!_.isArray(contract.comboLegs)) {
      args.push(0);
    } else {
      args.push(contract.comboLegs.length);

      contract.comboLegs.forEach(function (comboLeg) {
        args.push(comboLeg.conId);
        args.push(comboLeg.ratio);
        args.push(comboLeg.action);
        args.push(comboLeg.exchange);
      });
    }
  }

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqAllOpenOrders()
.reqAutoOpenOrders(bAutoBind)
.reqContractDetails(reqId, contract)
.reqCurrentTime()
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
.<span class="apidocCodeKeywordSpan">reqHistoricalData</span>(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow
, useRTH, formatDate)
.reqIds(numIds)
.reqManagedAccts()
.reqMarketDataType(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqIds" id="apidoc.element.ib.outgoing.prototype.reqIds">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqIds
        <span class="apidocSignatureSpan">(numIds)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqIds = function (numIds) {
  var version = 1;

  this._send(C.OUTGOING.REQ_IDS, version, numIds);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  );
  ib.reqOpenOrders();
}).once(&#x27;openOrderEnd&#x27;, function () {
  ib.disconnect();
})

ib.connect()
  .<span class="apidocCodeKeywordSpan">reqIds</span>(1);
```

* [See more comprehensive examples here.](https://github.com/pilwon/node-ib/tree/master/examples)


## API
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqManagedAccts" id="apidoc.element.ib.outgoing.prototype.reqManagedAccts">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqManagedAccts
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqManagedAccts = function () {
  var version = 1;

  this._send(C.OUTGOING.REQ_MANAGED_ACCTS, version);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqContractDetails(reqId, contract)
.reqCurrentTime()
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
.<span class="apidocCodeKeywordSpan">reqManagedAccts</span>()
.reqMarketDataType(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
.reqPositions()
.reqRealTimeBars(tickerId, contract, barSize, whatToShow, useRTH)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqMarketDataType" id="apidoc.element.ib.outgoing.prototype.reqMarketDataType">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqMarketDataType
        <span class="apidocSignatureSpan">(marketDataType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqMarketDataType = function (marketDataType) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.REQ_MARKET_DATA_TYPE) {
    return this._controller.emitError(&#x27;It does not support marketDataType requests.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.REQ_MARKET_DATA_TYPE, version, marketDataType);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqCurrentTime()
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
.reqManagedAccts()
.<span class="apidocCodeKeywordSpan">reqMarketDataType</span>(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
.reqPositions()
.reqRealTimeBars(tickerId, contract, barSize, whatToShow, useRTH)
.reqScannerParameters()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqMktData" id="apidoc.element.ib.outgoing.prototype.reqMktData">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqMktData
        <span class="apidocSignatureSpan">(tickerId, contract, genericTickList, snapshot)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqMktData = function (tickerId, contract, genericTickList, snapshot) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.SNAPSHOT_MKT_DATA &#x26;&#x26; snapshot) {
    return this._controller.emitError(&#x27;It does not support snapshot market data requests.&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.UNDER_COMP) {
    return this._controller.emitError(&#x27;It does not support delta-neutral orders.&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.REQ_MKT_DATA_CONID) {
    return this._controller.emitError(&#x27;It does not support conId parameter.&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.TRADING_CLASS) {
    if (!_.isEmpty(contract.tradingClass)) {
      return this._controller.emitError(&#x27;It does not support tradingClass parameter in reqMarketData.&#x27;);
    }
  }

  var version = 10;

  var args = [C.OUTGOING.REQ_MKT_DATA, version, tickerId];

  // send contract fields
  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.REQ_MKT_DATA_CONID) {
    args.push(contract.conId);
  }
  args.push(contract.symbol);
  args.push(contract.secType);
  args.push(contract.expiry);
  args.push(contract.strike);
  args.push(contract.right);

  if (this._controller._serverVersion &#x3e;= 15) {
    args.push(contract.multiplier);
  }

  args.push(contract.exchange);

  if (this._controller._serverVersion &#x3e;= 14) {
    args.push(contract.primaryExch);
  }

  args.push(contract.currency);

  if (this._controller._serverVersion &#x3e;= 2) {
    args.push(contract.localSymbol);
  }

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.tradingClass);
  }

  if (this._controller._serverVersion &#x3e;= 8 &#x26;&#x26;
      _.isString(contract.secType) &#x26;&#x26;
      C.BAG_SEC_TYPE.toUpperCase() === contract.secType.toUpperCase()) {
    if (!_.isArray(contract.comboLegs)) {
      args.push(0);
    } else {
      args.push(contract.comboLegs.length);
      contract.comboLegs.forEach(function (comboLeg) {
        args.push(comboLeg.conId);
        args.push(comboLeg.ratio);
        args.push(comboLeg.action);
        args.push(comboLeg.exchange);
      });
    }
  }

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.UNDER_COMP) {
    if (_.isPlainObject(contract.underComp)) {
      args.push(true);
      args.push(contract.underComp.conId);
      args.push(contract.underComp.delta);
      args.push(contract.underComp.price);
    } else {
      args.push(false);
    }
  }

  if (this._controller._serverVersion &#x3e;= 31) {
<span class="apidocCodeCommentSpan">    /*
     * Note: Even though SHORTABLE tick type supported only
     *       starting server version 33 it would be relatively
     *       expensive to expose this restriction here.
     *
     *       Therefore we are relying on TWS doing validation.
     */
</span>    args.push(genericTickList);
  }

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.SNAPSHOT_MKT_DATA) {
    args.push(snapshot);
  }

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqExecutions(reqId, filter)
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
.reqManagedAccts()
.reqMarketDataType(marketDataType)
.<span class="apidocCodeKeywordSpan">reqMktData</span>(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
.reqPositions()
.reqRealTimeBars(tickerId, contract, barSize, whatToShow, useRTH)
.reqScannerParameters()
.reqScannerSubscription(tickerId, subscription)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqMktDepth" id="apidoc.element.ib.outgoing.prototype.reqMktDepth">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqMktDepth
        <span class="apidocSignatureSpan">(tickerId, contract, numRows)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqMktDepth = function (tickerId, contract, numRows) {
  if (this._controller._serverVersion &#x3c; 6) {
      return this._controller.emitError(&#x27;This feature is only available for versions of TWS &#x3e;=6&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.TRADING_CLASS) {
    if (!_.isEmpty(contract.tradingClass) || contract.conId &#x3e; 0) {
      return this._controller.emitError(&#x27;It does not support conId and tradingClass parameters in reqMktDepth.&#x27;);
    }
  }

  var version = 4;

  // send req mkt data msg
  var args = [C.OUTGOING.REQ_MKT_DEPTH, version, tickerId];

  // send contract fields
  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.conId);
  }

  args.push(contract.symbol);
  args.push(contract.secType);
  args.push(contract.expiry);
  args.push(contract.strike);
  args.push(contract.right);

  if (this._controller._serverVersion &#x3e;= 15) {
    args.push(contract.multiplier);
  }

  args.push(contract.exchange);
  args.push(contract.currency);
  args.push(contract.localSymbol);

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.tradingClass);
  }

  if (this._controller._serverVersion &#x3e;= 19) {
    args.push(numRows);
  }

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqFundamentalData(reqId, contract, reportType)
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
.reqManagedAccts()
.reqMarketDataType(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
.<span class="apidocCodeKeywordSpan">reqMktDepth</span>(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
.reqPositions()
.reqRealTimeBars(tickerId, contract, barSize, whatToShow, useRTH)
.reqScannerParameters()
.reqScannerSubscription(tickerId, subscription)
.requestFA(faDataType)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqNewsBulletins" id="apidoc.element.ib.outgoing.prototype.reqNewsBulletins">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqNewsBulletins
        <span class="apidocSignatureSpan">(allMsgs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqNewsBulletins = function (allMsgs) {
  var version = 1;

  this._send(C.OUTGOING.REQ_NEWS_BULLETINS, version, allMsgs);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqGlobalCancel()
.reqHistoricalData(tickerId, contract, endDateTime, durationStr, barSizeSetting, whatToShow, useRTH, formatDate)
.reqIds(numIds)
.reqManagedAccts()
.reqMarketDataType(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
.<span class="apidocCodeKeywordSpan">reqNewsBulletins</span>(allMsgs)
.reqOpenOrders()
.reqPositions()
.reqRealTimeBars(tickerId, contract, barSize, whatToShow, useRTH)
.reqScannerParameters()
.reqScannerSubscription(tickerId, subscription)
.requestFA(faDataType)
.setServerLogLevel(logLevel)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqOpenOrders" id="apidoc.element.ib.outgoing.prototype.reqOpenOrders">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqOpenOrders
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqOpenOrders = function () {
  var version = 1;

  this._send(C.OUTGOING.REQ_OPEN_ORDERS, version);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  console.log(&#x27;%s --- %s&#x27;, event, JSON.stringify(args));
}).once(&#x27;nextValidId&#x27;, function (orderId) {
  ib.placeOrder(
    orderId,
    ib.contract.stock(&#x27;AAPL&#x27;),
    ib.order.limit(&#x27;BUY&#x27;, 1, 0.01)  // safe, unreal value used for demo
  );
  ib.<span class="apidocCodeKeywordSpan">reqOpenOrders</span>();
}).once(&#x27;openOrderEnd&#x27;, function () {
  ib.disconnect();
})

ib.connect()
  .reqIds(1);
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqPositions" id="apidoc.element.ib.outgoing.prototype.reqPositions">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqPositions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqPositions = function () {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.ACCT_SUMMARY) {
    return this._controller.emitError(&#x27;It does not support position requests.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.REQ_POSITIONS, version);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqIds(numIds)
.reqManagedAccts()
.reqMarketDataType(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
.<span class="apidocCodeKeywordSpan">reqPositions</span>()
.reqRealTimeBars(tickerId, contract, barSize, whatToShow, useRTH)
.reqScannerParameters()
.reqScannerSubscription(tickerId, subscription)
.requestFA(faDataType)
.setServerLogLevel(logLevel)
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqRealTimeBars" id="apidoc.element.ib.outgoing.prototype.reqRealTimeBars">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqRealTimeBars
        <span class="apidocSignatureSpan">(tickerId, contract, barSize, whatToShow, useRTH)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqRealTimeBars = function (tickerId, contract, barSize, whatToShow, useRTH) {
  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.REAL_TIME_BARS) {
    return this._controller.emitError(&#x27;It does not support real time bars.&#x27;);
  }

  if (this._controller._serverVersion &#x3c; C.MIN_SERVER_VER.TRADING_CLASS) {
    if (!_.isEmpty(contract.tradingClass) || contract.conId &#x3e; 0) {
      return this._controller.emitError(&#x27;It does not support conId and tradingClass parameters in reqRealTimeBars.&#x27;);
    }
  }

  var version = 2;

  // send req mkt data msg
  var args = [C.OUTGOING.REQ_REAL_TIME_BARS, version, tickerId];

  // send contract fields
  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.conId);
  }

  args.push(contract.symbol);
  args.push(contract.secType);
  args.push(contract.expiry);
  args.push(contract.strike);
  args.push(contract.right);
  args.push(contract.multiplier);
  args.push(contract.exchange);
  args.push(contract.primaryExch);
  args.push(contract.currency);
  args.push(contract.localSymbol);

  if (this._controller._serverVersion &#x3e;= C.MIN_SERVER_VER.TRADING_CLASS) {
    args.push(contract.tradingClass);
  }

  args.push(barSize);  // this parameter is not currently used
  args.push(whatToShow);
  args.push(useRTH);

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqManagedAccts()
.reqMarketDataType(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
.reqPositions()
.<span class="apidocCodeKeywordSpan">reqRealTimeBars</span>(tickerId, contract, barSize, whatToShow, useRTH)
.reqScannerParameters()
.reqScannerSubscription(tickerId, subscription)
.requestFA(faDataType)
.setServerLogLevel(logLevel)
```

### Events
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqScannerParameters" id="apidoc.element.ib.outgoing.prototype.reqScannerParameters">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqScannerParameters
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqScannerParameters = function () {
  if (this._controller._serverVersion &#x3c; 24) {
    return this._controller.emitError(&#x27;It does not support API scanner subscription.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.REQ_SCANNER_PARAMETERS, version);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqMarketDataType(marketDataType)
.reqMktData(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
.reqPositions()
.reqRealTimeBars(tickerId, contract, barSize, whatToShow, useRTH)
.<span class="apidocCodeKeywordSpan">reqScannerParameters</span>()
.reqScannerSubscription(tickerId, subscription)
.requestFA(faDataType)
.setServerLogLevel(logLevel)
```

### Events
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.reqScannerSubscription" id="apidoc.element.ib.outgoing.prototype.reqScannerSubscription">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>reqScannerSubscription
        <span class="apidocSignatureSpan">(tickerId, subscription)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqScannerSubscription = function (tickerId, subscription) {
  if (this._controller._serverVersion &#x3c; 24) {
    return this._controller.emitError(&#x27;It does not support API scanner subscription.&#x27;);
  }

  var version = 3;

  var args = [C.OUTGOING.REQ_SCANNER_SUBSCRIPTION, version, tickerId];

  args.push(_nullifyMax(subscription.numberOfRows));
  args.push(subscription.instrument);
  args.push(subscription.locationCode);
  args.push(subscription.scanCode);
  args.push(_nullifyMax(subscription.abovePrice));
  args.push(_nullifyMax(subscription.belowPrice));
  args.push(_nullifyMax(subscription.aboveVolume));
  args.push(_nullifyMax(subscription.marketCapAbove));
  args.push(_nullifyMax(subscription.marketCapBelow));
  args.push(subscription.moodyRatingAbove);
  args.push(subscription.moodyRatingBelow);
  args.push(subscription.spRatingAbove);
  args.push(subscription.spRatingBelow);
  args.push(subscription.maturityDateAbove);
  args.push(subscription.maturityDateBelow);
  args.push(_nullifyMax(subscription.couponRateAbove));
  args.push(_nullifyMax(subscription.couponRateBelow));
  args.push(subscription.excludeConvertible);

  if (this._controller._serverVersion &#x3e;= 25) {
    args.push(_nullifyMax(subscription.averageOptionVolumeAbove));
    args.push(subscription.scannerSettingPairs);
  }

  if (this._controller._serverVersion &#x3e;= 27) {
    args.push(subscription.stockTypeFilter);
  }

  this._send(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqMktData(tickerId, contract, genericTickList, snapshot)
.reqMktDepth(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
.reqPositions()
.reqRealTimeBars(tickerId, contract, barSize, whatToShow, useRTH)
.reqScannerParameters()
.<span class="apidocCodeKeywordSpan">reqScannerSubscription</span>(tickerId, subscription)
.requestFA(faDataType)
.setServerLogLevel(logLevel)
```

### Events

```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.requestFA" id="apidoc.element.ib.outgoing.prototype.requestFA">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>requestFA
        <span class="apidocSignatureSpan">(faDataType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">requestFA = function (faDataType) {
  if (this._controller._serverVersion &#x3c; 13) {
    return this._controller.emitError(&#x27;This feature is only available for versions of TWS &#x3e;= 13.&#x27;);
  }

  var version = 1;

  this._send(C.OUTGOING.REQ_FA, version, faDataType);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqMktDepth(tickerId, contract, numRows)
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
.reqPositions()
.reqRealTimeBars(tickerId, contract, barSize, whatToShow, useRTH)
.reqScannerParameters()
.reqScannerSubscription(tickerId, subscription)
.<span class="apidocCodeKeywordSpan">requestFA</span>(faDataType)
.setServerLogLevel(logLevel)
```

### Events

```js
// General
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.outgoing.prototype.setServerLogLevel" id="apidoc.element.ib.outgoing.prototype.setServerLogLevel">
        function <span class="apidocSignatureSpan">ib.outgoing.prototype.</span>setServerLogLevel
        <span class="apidocSignatureSpan">(logLevel)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setServerLogLevel = function (logLevel) {
  var version = 1;

  this._send(C.OUTGOING.SET_SERVER_LOGLEVEL, version, logLevel);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.reqNewsBulletins(allMsgs)
.reqOpenOrders()
.reqPositions()
.reqRealTimeBars(tickerId, contract, barSize, whatToShow, useRTH)
.reqScannerParameters()
.reqScannerSubscription(tickerId, subscription)
.requestFA(faDataType)
.<span class="apidocCodeKeywordSpan">setServerLogLevel</span>(logLevel)
```

### Events

```js
// General
.on(&#x27;error&#x27;, function (err, data))
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.socket" id="apidoc.module.ib.socket">module ib.socket</a></h1>


    <h2>
        <a href="#apidoc.element.ib.socket.socket" id="apidoc.element.ib.socket.socket">
        function <span class="apidocSignatureSpan">ib.</span>socket
        <span class="apidocSignatureSpan">(controller)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Socket(controller) {
  this._controller = controller;

  this._client = null;
  this._connected = false;
  this._dataFragment = &#x27;&#x27;;
  this._neverReceived = true;
  this._neverSent = true;
  this._waitingAsync = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.socket.prototype" id="apidoc.module.ib.socket.prototype">module ib.socket.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.ib.socket.prototype._onConnect" id="apidoc.element.ib.socket.prototype._onConnect">
        function <span class="apidocSignatureSpan">ib.socket.prototype.</span>_onConnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onConnect = function () {
  this._connected = true;
  this._controller.emit(&#x27;connected&#x27;);

  this._controller.run(&#x27;sendAsync&#x27;, [C.CLIENT_VERSION]);
  this._controller.run(&#x27;sendAsync&#x27;, [this._controller.options.clientId]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.socket.prototype._onData" id="apidoc.element.ib.socket.prototype._onData">
        function <span class="apidocSignatureSpan">ib.socket.prototype.</span>_onData
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onData = function (data) {
  var dataWithFragment = this._dataFragment + data.toString();

  var tokens = dataWithFragment.split(EOL);
  if (tokens[tokens.length - 1] !== &#x27;&#x27;) {
    this._dataFragment = tokens[tokens.length - 1];
  } else {
    this._dataFragment = &#x27;&#x27;;
  }
  tokens = tokens.slice(0, -1);
  this._controller.emit(&#x27;received&#x27;, tokens.slice(0), data);

  // Process data queue
  this._controller._incoming.enqueue(tokens);

  if (this._neverReceived) {
    this._controller._serverVersion = parseInt(this._controller._incoming.dequeue(), 10);
    this._controller._serverConnectionTime = this._controller._incoming.dequeue();
    this._controller.emit(&#x27;server&#x27;, this._controller._serverVersion, this._controller._serverConnectionTime);
  }

  this._controller._incoming.process();

  // Async
  if (this._waitingAsync) {
    this._waitingAsync = false;
    this._controller.resume();
  }

  this._neverReceived = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.socket.prototype._onEnd" id="apidoc.element.ib.socket.prototype._onEnd">
        function <span class="apidocSignatureSpan">ib.socket.prototype.</span>_onEnd
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onEnd = function () {
  var wasConnected = this._connected;
  this._connected = false;

  if (wasConnected) {
    this._controller.emit(&#x27;disconnected&#x27;);
  }

  this._controller.resume();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.socket.prototype._onError" id="apidoc.element.ib.socket.prototype._onError">
        function <span class="apidocSignatureSpan">ib.socket.prototype.</span>_onError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onError = function (err) {
  this._controller.emit(&#x27;error&#x27;, err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.socket.prototype.connect" id="apidoc.element.ib.socket.prototype.connect">
        function <span class="apidocSignatureSpan">ib.socket.prototype.</span>connect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function () {
  var self = this;

  this._controller.pause();

  this._neverReceived = true;
  this._neverSent = true;

  this._client = net.connect({
    host: this._controller.options.host,
    port: this._controller.options.port
  }, function () {
    self._onConnect.apply(self, arguments);
    self._controller.resume();
  });

  this._client.on(&#x27;data&#x27;, function () {
    self._onData.apply(self, arguments);
  });

  this._client.on(&#x27;close&#x27;, function () {
    self._onEnd.apply(self, arguments);
  });

  this._client.on(&#x27;end&#x27;, function () {
    self._onEnd.apply(self, arguments);
  });

  this._client.on(&#x27;error&#x27;, function () {
    self._onError.apply(self, arguments);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    ib.order.limit(&#x27;BUY&#x27;, 1, 0.01)  // safe, unreal value used for demo
  );
  ib.reqOpenOrders();
}).once(&#x27;openOrderEnd&#x27;, function () {
  ib.disconnect();
})

ib.<span class="apidocCodeKeywordSpan">connect</span>()
  .reqIds(1);
```

* [See more comprehensive examples here.](https://github.com/pilwon/node-ib/tree/master/examples)


## API
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.socket.prototype.disconnect" id="apidoc.element.ib.socket.prototype.disconnect">
        function <span class="apidocSignatureSpan">ib.socket.prototype.</span>disconnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">disconnect = function () {
  this._controller.pause();
  this._client.end();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  ib.placeOrder(
    orderId,
    ib.contract.stock(&#x27;AAPL&#x27;),
    ib.order.limit(&#x27;BUY&#x27;, 1, 0.01)  // safe, unreal value used for demo
  );
  ib.reqOpenOrders();
}).once(&#x27;openOrderEnd&#x27;, function () {
  ib.<span class="apidocCodeKeywordSpan">disconnect</span>();
})

ib.connect()
  .reqIds(1);
```

* [See more comprehensive examples here.](https://github.com/pilwon/node-ib/tree/master/examples)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.socket.prototype.send" id="apidoc.element.ib.socket.prototype.send">
        function <span class="apidocSignatureSpan">ib.socket.prototype.</span>send
        <span class="apidocSignatureSpan">(tokens, async)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (tokens, async) {
  if (async) {
    this._waitingAsync = true;
    this._controller.pause();
  }

  tokens = _.flatten([tokens]);

  _.forEach(tokens, function (value, i) {
    if (_.isBoolean(value)) {
      tokens[i] = value ? 1 : 0;
    }
  });

  var data = tokens.join(EOL) + EOL;
  this._client.write(data);

  this._controller.emit(&#x27;sent&#x27;, tokens, data);

  this._neverSent = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
} else {
  this.emitError(&#x27;Cannot disconnect if already disconnected.&#x27;);
}
};

Controller.prototype._send = function (data, async) {
if (this._socket._connected) {
  this._socket.<span class="apidocCodeKeywordSpan">send</span>(data, async);
} else {
  this.emitError(&#x27;Cannot send data when disconnected.&#x27;);
}
};

Controller.prototype._sendAsync = function (data) {
this._send(data, true);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ib.util" id="apidoc.module.ib.util">module ib.util</a></h1>


    <h2>
        <a href="#apidoc.element.ib.util.incomingToString" id="apidoc.element.ib.util.incomingToString">
        function <span class="apidocSignatureSpan">ib.util.</span>incomingToString
        <span class="apidocSignatureSpan">(incoming)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function incomingToString(incoming) {
  return _findKeyForValue(C.INCOMING, incoming);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.order.stop(action, quantity, price)
.order.stopLimit(action, quantity, limitPrice, stopPrice)
```

### Util

```js
.<span class="apidocCodeKeywordSpan">incomingToString</span>(incoming)
.numberToString(number)
.outgoingToString(outgoing)
.tickTypeToString(tickType)
```


## Credits
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.util.numberToString" id="apidoc.element.ib.util.numberToString">
        function <span class="apidocSignatureSpan">ib.util.</span>numberToString
        <span class="apidocSignatureSpan">(number)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function numberToString(number) {
  if (number === Number.MAX_VALUE) {
    return &#x27;MAX&#x27;;
  } else if (number === Number.MIN_VALUE) {
    return &#x27;MIN&#x27;;
  } else {
    return number.toString();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.order.stopLimit(action, quantity, limitPrice, stopPrice)
```

### Util

```js
.incomingToString(incoming)
.<span class="apidocCodeKeywordSpan">numberToString</span>(number)
.outgoingToString(outgoing)
.tickTypeToString(tickType)
```


## Credits
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.util.outgoingToString" id="apidoc.element.ib.util.outgoingToString">
        function <span class="apidocSignatureSpan">ib.util.</span>outgoingToString
        <span class="apidocSignatureSpan">(outgoing)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function outgoingToString(outgoing) {
  return _findKeyForValue(C.OUTGOING, outgoing);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

### Util

```js
.incomingToString(incoming)
.numberToString(number)
.<span class="apidocCodeKeywordSpan">outgoingToString</span>(outgoing)
.tickTypeToString(tickType)
```


## Credits

See the [contributors](https://github.com/pilwon/node-ib/graphs/contributors).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ib.util.tickTypeToString" id="apidoc.element.ib.util.tickTypeToString">
        function <span class="apidocSignatureSpan">ib.util.</span>tickTypeToString
        <span class="apidocSignatureSpan">(tickType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function tickTypeToString(tickType) {
  return _findKeyForValue(C.TICK_TYPE, tickType);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### Util

```js
.incomingToString(incoming)
.numberToString(number)
.outgoingToString(outgoing)
.<span class="apidocCodeKeywordSpan">tickTypeToString</span>(tickType)
```


## Credits

See the [contributors](https://github.com/pilwon/node-ib/graphs/contributors).
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
